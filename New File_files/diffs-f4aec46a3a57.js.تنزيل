"use strict";(()=>{var Xn=Object.defineProperty;var i=(z,B)=>Xn(z,"name",{value:B,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5998],{76745:(z,B,m)=>{m.d(B,{Z:()=>L});function g(a){const f=document.createElement("pre");return f.style.width="1px",f.style.height="1px",f.style.position="fixed",f.style.top="5px",f.textContent=a,f}i(g,"createNode");function C(a){if("clipboard"in navigator)return navigator.clipboard.writeText(a.textContent);const f=getSelection();if(f==null)return Promise.reject(new Error);f.removeAllRanges();const h=document.createRange();return h.selectNodeContents(a),f.addRange(h),document.execCommand("copy"),f.removeAllRanges(),Promise.resolve()}i(C,"copyNode");function j(a){if("clipboard"in navigator)return navigator.clipboard.writeText(a);const f=document.body;if(!f)return Promise.reject(new Error);const h=g(a);return f.appendChild(h),C(h),f.removeChild(h),Promise.resolve()}i(j,"copyText");function x(a){const f=a.getAttribute("for"),h=a.getAttribute("value");function v(){a.dispatchEvent(new CustomEvent("clipboard-copy",{bubbles:!0}))}if(i(v,"trigger"),h)j(h).then(v);else if(f){const q="getRootNode"in Element.prototype?a.getRootNode():a.ownerDocument;if(!(q instanceof Document||"ShadowRoot"in window&&q instanceof ShadowRoot))return;const k=q.getElementById(f);k&&E(k).then(v)}}i(x,"copy");function E(a){return a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?j(a.value):a instanceof HTMLAnchorElement&&a.hasAttribute("href")?j(a.href):C(a)}i(E,"copyTarget");function d(a){const f=a.currentTarget;f instanceof HTMLElement&&x(f)}i(d,"clicked");function y(a){if(a.key===" "||a.key==="Enter"){const f=a.currentTarget;f instanceof HTMLElement&&(a.preventDefault(),x(f))}}i(y,"keydown");function b(a){a.currentTarget.addEventListener("keydown",y)}i(b,"focused");function l(a){a.currentTarget.removeEventListener("keydown",y)}i(l,"blurred");class u extends HTMLElement{constructor(){super();this.addEventListener("click",d),this.addEventListener("focus",b),this.addEventListener("blur",l)}connectedCallback(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}get value(){return this.getAttribute("value")||""}set value(f){this.setAttribute("value",f)}}i(u,"ClipboardCopyElement"),window.customElements.get("clipboard-copy")||(window.ClipboardCopyElement=u,window.customElements.define("clipboard-copy",u));const L=u},46100:(z,B,m)=>{var g=m(59753),C=m(37713);(0,g.on)("click",".js-conversation-menu-button",function(){let e=!0;return async function(t){if(e===!1){const s=t.currentTarget.closest(".select-menu").querySelector("details-menu");if(!s)return;s.innerHTML="";const r=`${s.getAttribute("src")}?instrument=1`,c=await fetch(r);c.ok&&(s.innerHTML=await c.text())}e=!1}}()),(0,g.on)("click",".js-conversations-menu-item",function(e){const t=e.currentTarget,n=t.closest(".js-conversations-details");n.hasAttribute("open")&&n.removeAttribute("open"),window.location.hash=t.hash,(0,C.kc)(document)}),(0,g.on)("click",".js-resolved-conversations",async function(e){const t=e.currentTarget.querySelector(".dropdown-caret"),n=e.currentTarget.querySelector(".select-menu-header");j(t),n.classList.toggle("border-bottom-0")});function j(e){e.style.transform===""?e.style.transform="rotate(180deg)":e.style.transform=""}i(j,"flipCaret");var x=m(86404),E=m(70130),d=m(64463),y=m(96310);(0,g.on)("details:toggled-group",".js-file.js-details-container",function(e){e.target===e.currentTarget&&l(e.detail.open)}),(0,g.on)("details:toggled",".js-file.js-details-container",function(e){if(e.target!==e.currentTarget)return;const t=e.currentTarget;t.getBoundingClientRect().top<0&&(0,C.zT)(t)}),(0,E.Z)(()=>{const e=window.location.hash.slice(1);if(!e)return;const t=document.getElementsByName(e)[0];if(!t)return;const n=t.nextElementSibling;n&&n.matches(".js-file.js-details-container")&&(n.classList.add("open"),n.classList.add("Details--on"))}),(0,d.N7)(".js-file-header-dropdown",{subscribe:e=>(0,x.RB)(e,"toggle",b)});function b({currentTarget:e}){const t=e,n=t.hasAttribute("open");t.closest(".js-file-header").classList.toggle("has-open-dropdown",n)}i(b,"toggleFileHeaderMenu");function l(e){if(!document.querySelector(".js-file-filter"))return;const n=L();for(const r of n)r.checked=e;const o=a();o&&(o.checked=!e);const s=f();H(s),P(s),se(),ee(),ie(),(0,y.X)(s,_(),u(),h(),v(),k(),R(),A())}i(l,"toggledAllFileContents");function u(){return Array.from(L()).filter(t=>t.checked).map(t=>t.value)}i(u,"getSelectedFileTypes");function L(){return document.querySelectorAll(".js-diff-file-type-option")}i(L,"getFileTypeOptions");function a(){const e=document.querySelector(".js-deleted-files-toggle");if(e instanceof HTMLInputElement)return e}i(a,"getDeletedFilesInput");function f(){return q()||R()||A()||h()||k()}i(f,"fileFilterActive");function h(){return v().length>0}i(h,"codeownerFilterActive");function v(){const e=document.querySelectorAll(".js-diff-owner-option");return Array.from(e).filter(n=>n.checked).map(n=>n.value)}i(v,"getSelectedOwners");function q(){return u().length!==L().length}i(q,"fileTypeFilterActive");function k(){const e=document.querySelector(".js-manifests-option");return e?e.checked:!1}i(k,"manifestFilterActive");function R(){const e=a();return e?!e.checked:!1}i(R,"deletedFilterActive");function A(){const e=document.querySelector(".js-viewed-files-toggle");return e?!e.checked:!1}i(A,"viewedFilterActive");function _(){return new URLSearchParams(window.location.search).has("w")}i(_,"whitespaceFilterActive");function H(e){document.querySelector(".js-file-filter-text").classList.toggle("color-fg-accent",e)}i(H,"toggleHighlightActiveFilter");function P(e){const t=document.querySelector(".js-reset-filters"),n=document.querySelector(".js-commits-filtered");t!=null&&!n&&(t.hidden=!e)}i(P,"toggleResetFileFiltersButton");function ee(){const e=q(),t=document.querySelector(".js-file-filter-select-all-container"),n=e?"data-select-all-markup":"data-all-selected-markup",o=t.getAttribute(n);t.textContent=o,t.classList.toggle("color-fg-muted",!e),t.classList.toggle("color-fg-accent",e)}i(ee,"toggleSelectAll");function se(){const e=L(),t=R();for(const n of e)if(t){const o=n.getAttribute("data-non-deleted-files-count")==="0";n.disabled=o}else n.disabled=!1}i(se,"toggleAvailableOptions");function ie(){const e=document.querySelectorAll(".js-file-type-count");for(const t of e){const n=R()?"data-non-deleted-file-count-markup":"data-all-file-count-markup",o=t.getAttribute(n);o&&(t.textContent=o)}}i(ie,"toggleFileTypeCounts");function fe(){const e=document.querySelector(".js-file-filter-blankslate");if(!e)return;if(document.querySelectorAll(".js-diff-progressive-loader").length>0){e.hidden=!0;return}const n=document.querySelectorAll(".js-file");if(n.length===0){e.hidden=!0;return}const o=Array.from(n).some(s=>!s.hidden);e.hidden=o}i(fe,"checkEmptyFilterResults"),(0,g.on)("click",".js-jump-to-menu-item",function({currentTarget:e}){const t=e.getAttribute("href").substring(1),n=document.querySelector(`[data-anchor="${t}"]`);if(n){const o=n.closest(".js-file.js-details-container");o.hidden=!1}fe()});var T=m(95140),F=m(70497),$=m(69567),oe=m(82036),w=m(52660),S=m(10900),I=m(65935);const N="```suggestion",G="```",K=new RegExp(`${N}(?:.*)
`,"i"),J=new RegExp(`${G}(
|$)`);function Q(e,t){const n=e.slice(0,t).split(`
`);return e.split(`
`)[n.length-1]}i(Q,"lineAtIndex");function Y(e){const n=/^(\s+)/.exec(e);return n&&n[0]||""}i(Y,"leadingWhitespace");function ce(e){let t=`${N}
`;return t+=`${e}
`,t+=G,t}i(ce,"formatSuggestion");function ge(e,t,n=0){const o=t.substring(n,t.length),s=e.exec(o);return s?s.index+n:-1}i(ge,"findNextOccurrenceOf");function je(e,t){const n=[];let o=0,s=-1;for(;(s=ge(K,e,o))>-1;){o=s+N.length;const r=ge(J,e,o);if(r===-1)return!1;o=r+G.length,n.push([s,r])}return n.some(r=>t>r[0]&&t<r[1])}i(je,"cursorInSuggestionBlock");function Dt(e){const t=e.selectionStart;if(!je(e.value,t))return!1;const n=e.value,o=Q(n,t);if(o===null)return!1;const r=`
${Y(o)}`,c=n.substr(0,t)+r+n.substr(t);(0,oe.Se)(e,c);const p=t+r.length;return e.setSelectionRange(p,p),!0}i(Dt,"insertNewSuggestionLine");function Pt(e,t){const n=ce(e),o=t.selectionStart,s=t.value,r=ge(/\n/,s,o),c=s.trim()==="",p=Q(s,o),D=p.trim()==="",O=`
${G}`.length;let M=s,U=0;if(c)M=n,U=M.length-O;else if(r===-1)D?(M=s+n,U=M.length-O):(M=[s,n].join(`
`),U=M.length-O);else if(D){const W=Y(p),Z=o-W.length,X=s.substring(0,Z),ne=s.substring(r,s.length);M=[X,n,ne].join(""),U=M.length-ne.length-O}else if(je(s,o)){const W=ge(/```/,s,o)+3,Z=s.substring(0,W),X=s.substring(W,s.length);M=[Z,`
`,n,X].join(""),U=M.length-X.length-O}else{const W=s.substring(0,r),Z=s.substring(r,s.length);M=[W,`
`,n,Z].join(""),U=M.length-Z.length-O}(0,oe.Se)(t,M),t.focus(),t.setSelectionRange(U,U)}i(Pt,"insertSuggestionBlock");var Ve=m(84570),ke=m(74136);const re={addToBatchEnabled:".js-add-to-batch-enabled",unchangedSuggestion:".js-unchanged-suggestion",closedOrMergedPull:".js-closed-pull",viewingSubset:".js-viewing-subset-changes",leftBlob:".js-validation-on-left-blob",rightBlob:".js-validation-on-right-blob",outdatedComment:".js-outdated-comment",resolvedThread:".js-resolved-thread",pendingReview:".js-pending-review",isMultiLine:".js-is-multiline",inMergeQueue:".js-in-merge-queue"};function Ft(e){const t=e.getAttribute("data-lines");if(t!=null){const o=e.closest(".js-suggested-changes-container").querySelector(".js-comment-field");Pt(t,o)}}i(Ft,"renderSuggestionBlock");function ze(e,t){const n=document.querySelectorAll(".js-apply-suggestion-button"),o=e.querySelector(".js-disabled-apply-suggestion-button");for(const s of n){const r=o.cloneNode(!0);pe(r,t),s.closest("details").replaceWith(r)}}i(ze,"disableAllApplySuggestionButtons");function Ke(e){const t=document.querySelector(".js-batched-suggested-changes-container");t&&t.classList.add("d-none");for(const n of document.querySelectorAll(".js-apply-single-suggestion"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-add"))n.classList.remove("d-none"),n.disabled=!0,n.setAttribute("aria-label",e);for(const n of document.querySelectorAll(".js-batched-suggested-changes-remove"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))n.classList.add("d-none");for(const n of document.querySelectorAll(".js-pending-batched-suggestion-label"))n.classList.add("d-none")}i(Ke,"disableBatchSuggestionsButtons");function pe(e,t){e.setAttribute("aria-label",t),e.classList.remove("d-none")}i(pe,"displayButton");function Be(e,t){const n=document.querySelector(".js-suggested-changes-inline-validation-template").cloneNode(!0);n.classList.remove("js-suggested-changes-inline-validation-template");const o=n.querySelector(".js-suggested-changes-inline-error-message");o.textContent=e.trim(),t.parentNode.insertBefore(n,t.nextSibling)}i(Be,"validateOnPreview"),(0,g.on)("click",".js-suggested-change-toolbar-item",function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&t.getAttribute("aria-disabled")==="false"&&Ft(t)}),(0,g.on)("click",".js-refresh-after-suggestion",ke.H5);function Qe(e){if(!document.querySelector(".js-suggested-changes-subset-files"))return;const n=e.querySelectorAll(".js-suggested-change-toolbar-item"),o=re.viewingSubset;if(!o)return;const s=document.querySelector(o).textContent.trim();for(const r of n){r.setAttribute("aria-disabled","true");const c=r.getAttribute("aria-describedby"),p=document.getElementById(c);p.textContent=s}}i(Qe,"validateInlineCommmentsContainer"),(0,d.N7)(".js-inline-comments-container",{add(e){Qe(e)}}),(0,d.N7)(".js-preview-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=document.querySelector(re.rightBlob).textContent,o=document.querySelector(re.leftBlob).textContent,s=e.closest(".js-suggested-changes-blob");if(t.getAttribute("data-thread-side")!==""){if(t.getAttribute("data-thread-side")==="left")return Be(o,s),e.remove()}else{const M=e.closest(".js-inline-comment-form"),U=M.querySelector('input[name="side"]');if(!M||!U)return e.remove();if(M&&U.value==="left")return Be(o,s),e.remove()}const r=e.previousElementSibling,c=r.querySelector(".js-blob-code-deletion"),p=r.querySelectorAll(".js-blob-code-addition");if(!c||p.length===0)return;const D=c.textContent,O=Array.from(p).map(M=>M.textContent);if(D===O.join(`
`))return Be(n,s),e.remove();e.remove()}}),(0,d.N7)(".js-comment-body .js-apply-changes",{add(e){const t=e.closest(".js-suggested-changes-container");if(!t)return e.remove();const n=t.querySelector(".js-suggested-changes-template");if(!(n instanceof HTMLTemplateElement))return e.remove();const o=n.content.cloneNode(!0),s=o.querySelector(".js-disabled-apply-suggestion-button");let r;try{r=o.querySelector(".js-batched-suggested-changes-add")}catch(V){if(V.name!=="QueryError")throw V}if(document.querySelectorAll(".js-suggested-changes-files-tab").length){const V=document.querySelector(re.addToBatchEnabled).textContent;r&&(r.removeAttribute("disabled"),r.setAttribute("aria-label",V))}const c=document.querySelector(".js-pull-header-details"),p=c&&c.getAttribute("data-pull-is-open")==="true",D=e.closest(".js-resolvable-timeline-thread-container"),O=n.getAttribute("data-comment-pending")==="true",M=n.getAttribute("data-in-merge-queue")==="true",U=t.classList.contains("js-selection-contains-deletions");if(D&&D.getAttribute("data-resolved")==="true"){const V=document.querySelector(re.resolvedThread).textContent,ae=o.querySelector("details");return ae&&ae.remove(),pe(s,V),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",V)),e.replaceWith(o)}if(!p){const V=document.querySelector(re.closedOrMergedPull).textContent;return pe(s,V),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",V)),e.replaceWith(o)}if(M){const V=document.querySelector(re.inMergeQueue);let ae="";V&&(ae=V.textContent||"");const me=o.querySelector("details");return me&&me.remove(),pe(s,ae),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",ae)),e.replaceWith(o)}if(O){const V=document.querySelector(re.pendingReview).textContent;return o.querySelector("details").remove(),pe(s,V),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",V)),e.replaceWith(o)}if(U){const V=document.querySelector(re.leftBlob).textContent;return o.querySelector("details").remove(),pe(s,V),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",V)),e.replaceWith(o)}const W=document.querySelector(".js-suggested-changes-subset-files"),Z=n.getAttribute("data-outdated-comment")==="true";if(W||Z){let V;return W?V=document.querySelector(re.viewingSubset).textContent:Z&&(V=document.querySelector(re.outdatedComment).textContent),o.querySelector("details").remove(),pe(s,V),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",V)),e.replaceWith(o)}const X=o.querySelector(".js-single-suggested-change-form"),ne=e.closest(".js-suggested-changes-blob");if(ne){const V=ne.querySelectorAll(".js-blob-code-deletion"),ae=ne.querySelectorAll(".js-blob-code-addition");if(!V)return;const me=Array.from(V).map(ue=>ue.textContent),Le=Array.from(ae).map(ue=>ue.textContent);if(me.length===Le.length&&me.every((ue,ve)=>ue===Le[ve])){const ue=document.querySelector(re.unchangedSuggestion).textContent;o.querySelector("details").remove(),pe(s,ue),r&&(r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",ue))}else for(const ue of Le){const ve=document.createElement("input");ve.setAttribute("type","hidden"),ve.setAttribute("name","value[]"),ve.value=ue,X.appendChild(ve)}}e.replaceWith(o)}}),(0,d.N7)(".js-pull-header-details",{add(e){const t=e.getAttribute("data-pull-is-open")==="true",n=document.querySelector(".js-suggested-changes-template");if(t||!(n instanceof HTMLTemplateElement))return;const o=n.content,s=document.querySelector(re.closedOrMergedPull).textContent;ze(o,s),Ke(s)}}),(0,d.N7)(".js-suggested-changes-subset-files",{add(){const e=document.querySelector(".js-suggested-changes-template");if(!(e instanceof HTMLTemplateElement))return;const t=e.content,n=document.querySelector(re.viewingSubset).textContent;ze(t,n),Ke(n)}}),(0,g.on)("click",".js-apply-suggestion-button",async function(e){const t=e.currentTarget.parentElement;if(t){const n=t.querySelector(".js-suggestion-commit-title");setTimeout(()=>n.focus(),1)}}),(0,g.on)("click",".js-dismiss-suggested-change-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),o=new FormData;if(o.append("notice","suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:o,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok){const r=document.querySelectorAll(".js-suggested-change-onboarding-notice");for(const c of r)c.remove()}}),(0,Ve.w4)("keypress",".js-comment-field",function(e){if(e.key==="Enter"){const t=e.target;Dt(t)&&e.preventDefault()}}),(0,Ve.w4)("keypress",".js-suggestion-commit-message",function(e){const t=e.currentTarget;e.key==="Enter"&&t.setAttribute("rows","3")});function Ht(e){const n=e.closest(".js-review-state-classes").querySelectorAll("[data-pending-batched-suggestion]").length;for(const s of document.querySelectorAll(".js-pending-batched-suggested-changes-count"))s.textContent=String(n);const o=document.querySelector(".js-reenable-add-to-batch").textContent;for(const s of document.querySelectorAll("[data-batched-suggestion-reenable-sibling]"))s.removeAttribute("data-batched-suggestion-reenable-sibling"),s.removeAttribute("disabled"),s.setAttribute("aria-label",o);if(n>0){e.hidden=!1;const s=e.querySelector(".js-batched-suggested-changes-toggle");s.classList.add("anim-pulse-in"),s.addEventListener("animationend",()=>s.classList.remove("anim-pulse-in"),{once:!0});for(const r of document.querySelectorAll(".js-apply-single-suggestion"))r.classList.add("d-none");for(const r of document.querySelectorAll(".js-batched-suggested-changes-add")){const c=r.closest(".js-suggested-change-form-container");c.getAttribute("data-pending-batched-suggestion")==="true"||c.getAttribute("data-comment-pending")==="true"||c.getAttribute("data-outdated-comment")==="true"?r.classList.add("d-none"):r.classList.remove("d-none"),r.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true"&&(r.removeAttribute("data-batched-suggestion-disabled-by-sibling"),r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",document.querySelector(".js-one-suggestion-per-line").textContent))}for(const r of document.querySelectorAll(".js-batched-suggested-changes-remove"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none");for(const r of document.querySelectorAll(".js-focus-commit-suggestions-form-button")){const c=r.closest(".js-suggested-change-form-container"),p=c.getAttribute("data-comment-pending")==="true",D=c.getAttribute("data-outdated-comment")==="true",O=c.getAttribute("data-resolved-comment")==="true",W=r.closest(".js-inline-comments-container").querySelector('input[name="side"]').value==="left";p||D||O||W?r.classList.add("d-none"):r.classList.remove("d-none")}for(const r of document.querySelectorAll(".js-pending-batched-suggestion-label"))r.closest(".js-suggested-change-form-container").getAttribute("data-pending-batched-suggestion")==="true"?r.classList.remove("d-none"):r.classList.add("d-none")}else{e.hidden=!0;for(const s of document.querySelectorAll(".js-apply-single-suggestion"))s.classList.remove("d-none");for(const s of document.querySelectorAll(".js-batched-suggested-changes-add"))s.classList.remove("d-none");for(const s of document.querySelectorAll(".js-batched-suggested-changes-remove"))s.classList.add("d-none");for(const s of document.querySelectorAll(".js-focus-commit-suggestions-form-button"))s.classList.add("d-none");for(const s of document.querySelectorAll(".js-pending-batched-suggestion-label"))s.classList.add("d-none")}}i(Ht,"updatePendingSuggestionsState");function Ge(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>Ht(e))}i(Ge,"updatePendingSuggestionsHandler"),(0,g.on)("click",".js-batched-suggested-changes-add",function(e){const t=e.target,n=t.closest(".js-suggested-change-form-container");if(n.getAttribute("data-comment-pending")==="true"||n.getAttribute("data-outdated-comment")==="true"||t.getAttribute("data-batched-suggestion-disabled-by-sibling")==="true")return;n.setAttribute("data-pending-batched-suggestion","true");const o=t.closest(".js-inline-comments-container");for(const s of o.querySelectorAll(".js-batched-suggested-changes-add"))s.setAttribute("data-batched-suggestion-disabled-by-sibling","true");t.removeAttribute("data-batched-suggestion-disabled-by-sibling"),Ge()}),(0,g.on)("click",".js-batched-suggested-changes-remove",function(e){e.currentTarget.closest(".js-suggested-change-form-container").removeAttribute("data-pending-batched-suggestion");const n=e.currentTarget.closest(".js-inline-comments-container");for(const o of n.querySelectorAll(".js-batched-suggested-changes-add"))o.setAttribute("data-batched-suggestion-reenable-sibling","true");Ge()}),(0,g.on)("click",".js-focus-commit-suggestions-form-button",function(e){e.preventDefault(),window.location.href="#clear-commit-suggestions",window.location.href="#commit-suggestions"}),(0,g.on)("click",".js-dismiss-batched-suggested-changes-onboarding-notice",async function(e){const t=e.currentTarget.getAttribute("data-url"),n=e.currentTarget.parentElement.querySelector(".js-data-url-csrf"),o=new FormData;if(o.append("notice","batched_suggested_changes_onboarding_prompt"),(await fetch(t,{method:"POST",mode:"same-origin",body:o,headers:{"Scoped-CSRF-Token":n.value,"X-Requested-With":"XMLHttpRequest"}})).ok)for(const r of document.querySelectorAll(".js-batched-suggested-change-onboarding-notice"))r.remove()});function Ze(e,t){const n=e.querySelector("input[name=commit_title]"),o=e.querySelector("textarea[name=commit_message]");let s=n.value.trim();s===""&&(s=n.defaultValue);const r=o.value.trim();r!==""&&(s=`${s}

${r}
`),n.disabled=!0,o.disabled=!0;const c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","message"),c.value=s,e.appendChild(c);const p=document.createElement("input");p.setAttribute("type","hidden"),p.setAttribute("name","changes"),p.value=JSON.stringify(t),e.appendChild(p)}i(Ze,"convertFormInputs"),(0,g.on)("click",".js-single-suggested-change-form .js-suggested-changes-submit",function(e){const n=e.currentTarget.closest(".js-single-suggested-change-form"),o=Array.from(n.querySelectorAll('input[name="value[]"]')).map(r=>r.value),s=[{commentId:n.querySelector("input[name=comment_id]").value,path:n.querySelector("input[name=path]").value,suggestion:o}];Ze(n,s)}),(0,I.AC)(".js-single-suggested-change-form",async function(e,t){const n=e.closest(".js-suggested-change-form-container"),o=e.closest("details"),s=n.querySelector(".js-suggestion-applied"),c=e.closest(".js-suggested-changes-contents").querySelector(".js-error-message-placeholder");try{await t.json(),s.classList.remove("d-none"),n.querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),o.remove(),(0,ke.H5)()}catch(p){if(p.name!=="QueryError"){const D=p.response.json&&p.response.json.error,O=c.querySelector(".js-error-message");c.hidden=!1,O.textContent=D,n.prepend(c),e.closest(".js-suggested-change-form-container").querySelector(".js-batched-suggested-changes-add").classList.add("d-none"),o.remove()}}}),(0,g.on)("click",".js-suggestion-batch-submit",function(e){const t=e.currentTarget.closest(".js-batched-suggested-changes-form"),n=[];for(const o of document.querySelectorAll("[data-pending-batched-suggestion]")){const s=o.querySelector(".js-single-suggested-change-form"),r=Array.from(s.querySelectorAll('input[name="value[]"]')).map(c=>c.value);n.push({commentId:s.querySelector("input[name=comment_id]").value,path:s.querySelector("input[name=path]").value,suggestion:r})}Ze(t,n)}),(0,I.AC)(".js-batched-suggested-changes-form",async function(e,t){try{await t.json();const n=e.closest(".js-batched-suggested-changes-container");n.hidden=!0,(0,ke.H5)()}catch(n){const o=n.response.json&&n.response.json.error,r=e.closest(".js-batched-suggested-changes-container").querySelector(".js-error-message-container"),c=r.querySelector(".js-error-message");c.textContent=o,r.hidden=!1}}),(0,d.N7)(".js-files-tab-stale",{add(){const e=document.querySelector(".js-batched-suggested-changes-container");e&&setTimeout(()=>{e.hidden=!0})}});let Nt=0;(0,g.on)("click",".js-add-single-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Je(n);const o=$t(t)||Ut(t),s=Ye(o.querySelector("td"),t),r=s.querySelector(".js-inline-comment-form");r instanceof HTMLFormElement&&st(r,t),(0,T.j)(s)});function $t(e){const t=e.closest("tr"),n=Xe(t,".js-inline-comments-container");if(n instanceof Element)return n}i($t,"existingCommentRow");function Xe(e,t){const n=e.nextElementSibling;return n&&n.matches(t)?n:null}i(Xe,"next");function Ut(e){const t=e.closest("tr"),n=De("js-inline-comments-single-container-template",e).firstElementChild;return t.after(n),n}i(Ut,"insertCommentRow");function Ye(e,t){const n=Array.from(e.querySelectorAll(".review-comment-form-container")).pop();if(n)return n.closest("div.js-line-comments");{const o=De("js-inline-comments-single-container-template",t).querySelector("div.js-line-comments");return e.appendChild(o),o}}i(Ye,"findOrInsertCommentThread"),(0,g.on)("click",".js-add-split-line-comment",function(e){const t=e.currentTarget,n=t.closest(".file");Je(n);const o=t.closest("tr"),s=t.getAttribute("data-type")==="addition"?"js-addition":"js-deletion",r=Zt(o),c=Gt(r,s,t),p=Ye(c,t),D=p.querySelector(".js-inline-comment-form");D instanceof HTMLFormElement&&st(D,t),(0,T.j)(p)}),(0,I.AC)(".js-inline-comment-form",async function(e,t){Wt(e);let n;try{n=await t.json()}catch(p){if(p.response){let D;try{D=p.response.json}catch{}if(D){Vt(e,D);return}}throw p}const o=n.json,s=o.inline_comment,r=e.closest(".js-line-comments");s&&r.querySelector(".js-comments-holder").append((0,S.r)(document,s));const c=o.inline_comment_thread;c&&r.replaceWith((0,S.r)(document,c)),(0,T.w)(e)});function Wt(e){const t=e.querySelector(".js-comment-form-error");t&&(t.hidden=!0,t.textContent=null)}i(Wt,"resetInlineCommentError");function Vt(e,t){const n=e.querySelector(".js-comment-form-error");let o;t.errors?Array.isArray(t.errors)?o=t.errors.join(", "):o=t.errors:o="There was an error posting your comment.",n.textContent=o,n.style.display="block",n.hidden=!1,n.classList.remove("d-none")}i(Vt,"handleInlineCommentError");function zt(e){const[t,n]=e.match(/^new_inline_comment_(?:discussion|diff)_(?:[\w-]+)_(\d+)_(\d+)$/)||[];if(!t)return;const o=document.querySelector(`.js-inline-comment-form input[name='in_reply_to'][value='${n}']`);if(!o)return;const s=o.closest(".js-line-comments");s&&(0,T.j)(s)}i(zt,"showReplyForm");function Kt(e){const[t,n]=e.match(/^new_inline_comment_diff_(?:[\w-]+)_(\d+)$/)||[];if(!t)return;const o=document.querySelector(`.js-add-line-comment[data-anchor='${t}'][data-position='${n}']`);o&&o.click()}i(Kt,"showCommentForm"),document.addEventListener("session:resume",function(e){const t=e.detail;zt(t.targetId),Kt(t.targetId)});function Je(e){const t=e.querySelector(".js-toggle-file-notes");t instanceof HTMLInputElement&&(0,oe.Se)(t,!0)}i(Je,"ensureInlineNotesEnabled");function et(){for(const e of document.querySelectorAll(".file .js-inline-comments-container")){const n=e.querySelectorAll(".js-comments-holder > *").length>0,o=e.querySelector("[data-resolved='true']")!=null,s=e.querySelector(".js-inline-comment-form-container"),r=!!s&&s.classList.contains("open");!(n||o)&&!r&&e.remove()}}i(et,"cleanupInlineCommentContainers"),(0,d.N7)(".js-comment",{remove:et}),(0,g.on)("inlinecomment:focus",".js-inline-comment-form-container",function(e){const t=e.target.querySelector(".js-suggested-changes-container");t&&tt(t)}),(0,d.N7)(".js-suggested-changes-container.is-comment-editing",e=>{tt(e)});function Qt(e,t){const n=new URLSearchParams(e.search.slice(1)),o=t.elements.namedItem("in_reply_to")||t.elements.namedItem("comment_id"),s=t.querySelector("textarea");if(n.append("textarea_id",s.id),o instanceof HTMLInputElement&&o.value)return n.append("comment_id",o.value),n;const r=t.elements.namedItem("path"),c=t.elements.namedItem("start_side"),p=t.elements.namedItem("start_line"),D=t.elements.namedItem("side"),O=t.elements.namedItem("line"),M=t.elements.namedItem("start_commit_oid"),U=t.elements.namedItem("end_commit_oid"),W=t.elements.namedItem("base_commit_oid");return!(r instanceof HTMLInputElement)||!(c instanceof HTMLInputElement)||!(p instanceof HTMLInputElement)||!(D instanceof HTMLInputElement)||!(O instanceof HTMLInputElement)||!(M instanceof HTMLInputElement)||!(U instanceof HTMLInputElement)||!(W instanceof HTMLInputElement)?null:(n.append("path",r.value),n.append("start_side",c.value),n.append("start_line",p.value),n.append("end_side",D.value),n.append("end_line",O.value),n.append("start_commit_oid",M.value),n.append("end_commit_oid",U.value),n.append("base_commit_oid",W.value),n)}i(Qt,"paramsForSuggestionButton");async function tt(e){const t=e.querySelector(".js-suggestion-button-placeholder");if(!t)return;const n=t.getAttribute("data-src-base");if(!n)return;const o=new URL(n,window.location.origin),s=t.closest(".js-inline-comment-form")||t.closest(".js-comment-update");if(!(s instanceof HTMLFormElement))return;const r=Qt(o,s);if(!r)return;o.search=r.toString();const c=await(0,w.a)(document,o.toString());t.innerHTML="",t.appendChild(c)}i(tt,"loadSuggestionButton"),document.addEventListener("inlinecomment:collapse",()=>{et()});function Gt(e,t,n){const o=e.querySelector(`.js-line-comments.${t}`);if(o)return o;const s=De("js-inline-comments-split-form-container-template",n).firstElementChild;s.classList.add(t);const r=e.querySelectorAll(`.${t}`);r[r.length-1].after(s);for(const p of r)p.remove();return s}i(Gt,"expandLineCommentsEmptyCells");function Zt(e){let t=Xe(e,".js-inline-comments-container");if(t)return t;{const n="js-inline-comments-split-container-template",o=document.getElementById(n);if(!o)throw new Error(`Could not find element with id ${n}`);if(!(o instanceof HTMLTemplateElement))throw new Error(`Found element with id ${n} - but was not a Template`);return t=new $.R(o,{}).firstElementChild,e.after(t),t}}i(Zt,"inlineCommentsSplitContainerForLine");function nt(e,t,n,o){if(e.classList.remove("color-bg-success","color-bg-danger"),o){e.textContent=t;return}if(n==="right"){e.classList.add("color-fg-success"),e.textContent=`+${t}`;return}if(n==="left"){e.classList.add("color-fg-danger"),e.textContent=`-${t}`;return}e.textContent=String(t)}i(nt,"applyMultiLinePreview");const ot={R:"right",L:"left"};function Xt(e,t){const n=(0,F.vu)();if(!n||n.end.is(n.start))return;if(!(0,F.Oz)(t,n)){(0,F.MO)();return}const{start:{lineNumber:o},end:{lineNumber:s}}=n;let{start:{side:r},end:{side:c}}=n;const p=Number(t.getAttribute("data-line")),D=t.getAttribute("data-side");if(p!==s||!n.end.isContext()&&D!==ot[c]){(0,F.MO)();return}const O=ot[r],M=e.elements.namedItem("start_line"),U=e.elements.namedItem("start_side"),W=e.elements.namedItem("line"),Z=e.elements.namedItem("side"),X=e.elements.namedItem("preview_start_side"),ne=e.elements.namedItem("preview_side");if(M instanceof HTMLInputElement&&U instanceof HTMLInputElement&&W instanceof HTMLInputElement&&Z instanceof HTMLInputElement&&X instanceof HTMLInputElement&&ne instanceof HTMLInputElement){M.value=String(o),U.value=O,U.value=X.value=U.value,ne.value=Z.value;const V=M.value;r=U.value;const ae=W.value;c=Z.value;const me=e.closest(".js-inline-comment-form-container");if(V&&ae){const Le=me.querySelector(".js-multi-line-preview"),Bt=Le.querySelector(".js-multi-line-preview-start"),ue=Le.querySelector(".js-multi-line-preview-end"),ve=n.start.isContext(),Zn=n.end.isContext();nt(Bt,V,r,ve),nt(ue,ae,c,Zn),Le.hidden=!1,me.classList.add("is-multiline")}else me.querySelector(".js-multi-line-preview").hidden=!0,me.classList.remove("is-multiline");Qe(me)}}i(Xt,"fillMultilineFormFields");function st(e,t){var n;const o=["type","path","position","line","side","original-line"];for(const r of o){const c=e.elements.namedItem(r);if(c instanceof HTMLInputElement){const p=t.getAttribute(`data-${r}`)||"";c.value=p}}const s=(n=e.getElementsByClassName("js-expanded-diff-placeholder-value"))==null?void 0:n[0];if(s instanceof HTMLInputElement){const r=t.getAttribute("data-expanded-diff")||"";s.value=r}Xt(e,t)}i(st,"fillTemplateFormFields");function De(e,t){const n=document.getElementById(e);if(!n)throw new Error(`Could not find element with id ${e}`);if(!(n instanceof HTMLTemplateElement))throw new Error(`Found element with id ${e} - but was not a Template`);return new $.R(n,{anchor:t.getAttribute("data-anchor")||"",position:t.getAttribute("data-position")||"",sequence:Nt++})}i(De,"renderCommentTemplate");var Ee=m(79046),we=m(14037),Yt=m(17364);(0,d.N7)(".js-diff-progressive-container",function(e){it(e);const t=e.querySelector(".js-diff-progressive-loader");!t||t.addEventListener("load",function(){it(e)})});function Jt(e,t){var n;const o=e.querySelectorAll(".js-comment-container");for(const s of o){const r=s.getAttribute("data-hidden-comment-ids");if(r){const c=r.split(","),p=(n=t.match(/\d+/g))==null?void 0:n[0];if(p&&c.includes(p)){(0,Yt.$)(s);break}}}}i(Jt,"loadResolvedComments");function it(e){const t=rt();if(!t)return;ct(e,t);const n=en(e,t);!n||((0,C.zT)(n),lt(n))}i(it,"processProgressiveContainer"),(0,d.N7)(".js-diff-load-container",function(e){const t=e.querySelector(".js-diff-entry-loader");!t||t.addEventListener("load",function(){e.closest(".js-file").classList.remove("hide-file-notes-toggle");const o=rt();!o||ct(e,o)})}),(0,g.on)("click",".js-diff-load",function(e){if(e.target.classList.contains("js-ignore-this"))return;const t=e.currentTarget.closest(".js-diff-load-container");lt(t)});function rt(){return window.location.hash.slice(1)}i(rt,"urlAnchor");function ct(e,t){let n;t.match(/^diff-.+[LR]\d+-[LR]\d+/)?n=(0,we.Q)(e.ownerDocument,t.substring(0,t.indexOf("-",5))):n=(0,we.Q)(e.ownerDocument,t),n&&e.contains(n)?((0,Ee.O4)(n),(0,C.zT)(n)):Jt(e,t)}i(ct,"scrollToAnchor");function en(e,t){const n=tn(e,t);return n||nn(e,t)}i(en,"getEntryFromAnchor");function tn(e,t){const n=/^(diff-[0-9a-f]{32})(?:[L|R]\d+)?$/.exec(t);if(!n)return;const o=n[1],s=e.querySelector(`a[name='${o}']`);if(!s)return;const r=s.nextElementSibling;if(!(r&&!r.querySelector(".js-diff-load-container")))return r}i(tn,"getEntryFromDiffAnchor");function nn(e,t){const n=/^(?:r|commitcomment-)(\d+)$/.exec(t);if(!n)return;const o=n[1],s=e.querySelector(`#diff-with-comment-${o}`);return s?s.closest(".js-file"):void 0}i(nn,"getEntryFromCommentAnchor");function lt(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),o=e.querySelector("button.js-diff-load"),s=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),s.textContent=o.getAttribute("data-disable-with")||"",o.disabled=!0;const r=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=r.toString(),t.data}i(lt,"loadDiff");var on=m(40728);(0,g.on)("click",".js-rendered, .js-source",function(e){const t=e.currentTarget;if(t.classList.contains("selected")){e.preventDefault();return}sn(t),rn(t)}),(0,I.AC)(".js-prose-diff-toggle-form",async function(e,t){const n=e.closest(".js-details-container"),o=n.querySelector(".js-file-content"),s=await t.html();for(;o.lastChild;)o.removeChild(o.lastChild);o.append(s.html),n.classList.toggle("display-rich-diff"),n.classList.toggle("show-inline-notes")});function sn(e){const t=e.closest(".js-file-header"),n=e.classList.contains("js-rendered"),o=e.classList.contains("js-source"),s=t.getAttribute("data-short-path"),r=t.getAttribute("data-anchor"),c=new URL(window.location.href,window.location.origin),p=new URLSearchParams(c.search.slice(1));c.hash=r,n?p.set("short_path",s):o&&p.delete("short_path"),c.search=p.toString(),(0,on.lO)(null,"",c.toString())}i(sn,"updateWindowLocation");function rn(e){for(const t of document.querySelectorAll(".js-rendered, .js-source"))t.classList.remove("selected"),t.removeAttribute("aria-current");e.classList.add("selected"),e.setAttribute("aria-current","true")}i(rn,"updateSelectedButton"),(0,g.on)("click",".js-toc-retry",function(e){if(!(e.target instanceof Element))return;const n=e.target.closest(".select-menu").querySelector("include-fragment"),o=n.getAttribute("src");n.setAttribute("src",""),n.setAttribute("src",o)});var cn=m(43682);function at(e,t,n){const o=Array.from(e.querySelectorAll('[role="menuitem"]'));let s=o.indexOf(t),r=o.indexOf(n);if(s===-1)throw new Error("Couldn't find startIndex in container");if(r===-1)throw new Error("Couldn't find endItem in container");dt(e),o[r].classList.add("is-last-in-range"),s>r&&([s,r]=[r,s]);for(const c of o.slice(s,r+1))c.classList.add("is-range-selected")}i(at,"highlightSelectedRange");async function ln(e,t){function n(o){at(e,t,o.target.closest('[role="menuitem"]'))}i(n,"highlightRange"),at(e,t,t),e.addEventListener("mouseover",n),await new Promise(o=>window.addEventListener("keyup",o,{once:!0})),e.removeEventListener("mouseover",n),dt(e)}i(ln,"observeShiftRangeHighlights");function dt(e){for(const t of e.querySelectorAll('[role="menuitem"]'))t.classList.remove("is-range-selected","is-last-in-range")}i(dt,"resetHighlight"),(0,d.N7)(".js-diffbar-range-menu .js-diffbar-range-list",{subscribe:an});function an(e){const t=e.closest("details-menu");let n=!1;function o(r){n=r.shiftKey,n&&r.preventDefault()}i(o,"clicked");function s(r){if(!n)return;r.preventDefault();const c=r.detail.relatedTarget;if(c.classList.contains("is-range-selected")){r.stopPropagation();const p=e.querySelectorAll(".is-range-selected"),D=p[0],O=p[p.length-1],M=e.getAttribute("data-range-url"),U=D.getAttribute("data-parent-commit"),W=O.getAttribute("data-commit"),Z=U&&W?`${U}..${W}`:W,X=M.replace("$range",Z);(0,cn.ZP)({url:X,container:document.querySelector("#js-repo-pjax-container")})}else r.stopImmediatePropagation(),ln(e,c)}return i(s,"selected"),e.addEventListener("click",o,{capture:!0}),t.addEventListener("details-menu-select",s),{unsubscribe:()=>{e.removeEventListener("click",o,{capture:!0}),t.removeEventListener("details-menu-select",s)}}}i(an,"manageRangeHighlight"),(0,g.on)("toggle",".js-diffbar-range-menu",function(e){const t=e.currentTarget;if(!t.hasAttribute("open"))return;const n=t.querySelector(".in-range");n&&n.focus()},{capture:!0});var ut=m(12585);(0,g.on)("click",".js-compare-tab",function(e){for(const o of document.querySelectorAll(".js-compare-tab.selected"))o.classList.remove("selected");e.currentTarget.classList.add("selected");for(const o of document.querySelectorAll("#commits_bucket, #files_bucket, #commit_comments_bucket"))o.classList.add("d-none");const n=e.currentTarget.hash;document.querySelector(n).classList.remove("d-none"),e.preventDefault()}),(0,E.Z)(function({target:e}){if(!(e instanceof HTMLElement))return;const t=e.closest("#commits_bucket, #files_bucket, #commit_comments_bucket");t&&t instanceof HTMLElement&&!(0,ut.Z)(t)&&document.querySelector(`.js-compare-tab[href="#${t.id}"]`).click()}),(0,g.on)("click",".js-toggle-range-editor-cross-repo",function(){document.querySelector(".js-range-editor").classList.toggle("is-cross-repo")}),(0,g.on)("pjax:click",".js-range-editor",function(e){const t=document.querySelector(".js-compare-pr");if(t&&t.classList.contains("open")){const n=e.detail.options,o=new URL(n.url,window.location.origin);o.search.match(/expand=1/)||(o.search+=`${o.search?"&":""}expand=1`,n.url=o.toString())}}),(0,d.N7)(".js-compare-pr.open",{add(){document.body.classList.add("is-pr-composer-expanded")},remove(){document.body.classList.remove("is-pr-composer-expanded")}}),(0,g.on)("change",".js-collab-checkbox",function({currentTarget:e}){const t=e.form;for(const s of t.querySelectorAll(".errored"))s.classList.remove("errored");const o=e.closest(".js-collab-option").querySelector(".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")}),(0,I.AC)(".js-collab-form",async function(e,t){try{await t.text()}catch{for(const o of e.querySelectorAll(".status-indicator-loading")){o.classList.remove("status-indicator-loading"),o.classList.add("status-indicator-failed");const s=o.closest(".js-collab-option");s.classList.add("errored");const r=s.querySelector(".js-collab-checkbox");r.checked=!r.checked}for(const o of e.querySelectorAll(".status-indicator-success"))o.classList.remove("status-indicator-success");return}for(const n of e.querySelectorAll(".errored"))n.classList.remove("errored");for(const n of e.querySelectorAll(".status-indicator-loading"))n.classList.remove("status-indicator-loading"),n.classList.add("status-indicator-success")});var te=m(90420),ft=m(3447),dn=Object.defineProperty,un=Object.getOwnPropertyDescriptor,de=i((e,t,n,o)=>{for(var s=o>1?void 0:o?un(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(s=(o?c(t,n,s):c(s))||s);return o&&s&&dn(t,n,s),s},"__decorateClass"),mt=i((e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},"__accessCheck"),Se=i((e,t,n)=>(mt(e,t,"read from private field"),n?n.call(e):t.get(e)),"__privateGet"),qe=i((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},"__privateAdd"),Me=i((e,t,n,o)=>(mt(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),"__privateSet"),Ae,Ce,_e,Te;let le=i(class extends HTMLElement{constructor(){super(...arguments);this.sidebarHidden=!1,qe(this,Ae,null),qe(this,Ce,null),qe(this,_e,void 0),qe(this,Te,void 0),this.handleSidebarScroll=()=>{Me(this,Ae,requestAnimationFrame(this.updateSidebarHeight))},this.updateSidebarHeight=()=>{if(!this.sidebarContainer)return;const e=document.documentElement.clientHeight,t=this.diffToolbar.getBoundingClientRect(),n=this.mainContainer.getBoundingClientRect(),o=e>=n.bottom,s=t.top===0;let r;o?r=n.bottom-parseInt(this.sidebarContainer.style.top):s?r=e-t.height:r=e-parseInt(this.sidebarContainer.style.top),this.sidebarContainer.style.height=`${r}px`}}connectedCallback(){if(!this.sidebarContainer)return;Me(this,Te,new MutationObserver(this.handleNotificationShelfMutation)),Se(this,Te).observe(document.body,{subtree:!0,childList:!0});const{signal:e}=Me(this,_e,new AbortController);window.addEventListener("scroll",this.handleSidebarScroll,{signal:e}),window.addEventListener("resize",()=>this.handleSidebarResize(),{signal:e}),this.handleSidebarScroll()}disconnectedCallback(){var e;!this.sidebarContainer||(Se(this,Te).disconnect(),(e=Se(this,_e))==null||e.abort(),Se(this,Ae)!=null&&cancelAnimationFrame(Se(this,Ae)),Se(this,Ce)!=null&&cancelAnimationFrame(Se(this,Ce)))}toggleSidebar(e){if(this.layoutContainer.classList.toggle("hx_Layout--sidebar-hidden"),this.sidebarHidden=!this.sidebarHidden,!this.fileTree)return;const t=e.detail.toggleButton;!t||(this.fileTree.instrumentToggleFileTree(t),!!this.fileTreePathFilter&&t.id==="show-file-tree-button"&&this.fileTreePathFilter.focus())}handleOpenFilesListHotkeyEvent(){if(this.shouldOpenTocMenu()){this.tocMenuButton.click();return}!this.fileTree||(this.showFileTreeButton&&this.sidebarHidden?this.showFileTreeButton.click():this.fileTreePathFilter&&!this.sidebarHidden&&this.fileTreePathFilter.focus())}shouldOpenTocMenu(){return!!(this.tocMenu&&!this.tocMenu.hasAttribute("open")&&window.getComputedStyle(this.tocMenu).display!=="none")}handleNotificationShelfMutation(e){const t=document.firstElementChild;if(!!t.classList.contains("js-skip-scroll-target-into-view"))for(const n of e){for(const o of n.addedNodes)if(o instanceof HTMLElement&&o.classList.contains("js-notification-top-shelf")){t.classList.add("has-notification-top-shelf");break}for(const o of n.removedNodes)if(o instanceof HTMLElement&&o.classList.contains("js-notification-top-shelf")){t.classList.remove("has-notification-top-shelf");break}}}handleSidebarResize(){Me(this,Ce,requestAnimationFrame(this.updateSidebarHeight))}},"DiffLayoutElement");Ae=new WeakMap,Ce=new WeakMap,_e=new WeakMap,Te=new WeakMap,de([te.Lj],le.prototype,"sidebarHidden",2),de([te.fA],le.prototype,"layoutContainer",2),de([te.fA],le.prototype,"diffToolbar",2),de([te.fA],le.prototype,"tocMenu",2),de([te.fA],le.prototype,"tocMenuButton",2),de([te.fA],le.prototype,"mainContainer",2),de([te.fA],le.prototype,"sidebarContainer",2),de([te.fA],le.prototype,"fileTree",2),de([te.fA],le.prototype,"showFileTreeButton",2),de([te.fA],le.prototype,"fileTreePathFilter",2),de([(0,ft.D)(100)],le.prototype,"handleSidebarResize",1),le=de([te.Ih],le),(0,g.on)("click",".js-split-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),o=document.querySelector(".js-unified-diff-view-option");t.classList.add("color-border-accent-emphasis"),t.classList.remove("color-border-default"),e.classList.remove("color-border-accent-emphasis"),e.classList.add("color-border-default"),o.checked=!1,n.checked=!0}),(0,g.on)("click",".js-unified-diff-view",function(){const e=document.querySelector(".js-unified-diff-view-box"),t=document.querySelector(".js-split-diff-view-box"),n=document.querySelector(".js-split-diff-view-option"),o=document.querySelector(".js-unified-diff-view-option");t.classList.remove("color-border-accent-emphasis"),t.classList.add("color-border-default"),e.classList.add("color-border-accent-emphasis"),e.classList.remove("color-border-default"),o.checked=!0,n.checked=!1});var fn=m(27034);(0,g.on)("details:toggled",".js-pull-merging",function({currentTarget:e}){const t=Array.from(e.querySelectorAll(".js-merge-pull-request")),n=t.some(ut.Z);for(const o of t)o.classList.toggle("is-dirty",n)}),(0,g.on)("click",".js-merge-box-try-again",async function({currentTarget:e}){const t=e.getAttribute("data-form-target");if(!["js-cleanup-branch-form","js-merge-branch-form","js-queue-branch-form","js-update-branch-form"].includes(t))return;const o=e.closest(".js-pull-merging").getElementsByClassName(t)[0];(0,g.f)(o,"submit")}),document.addEventListener("session:resume",function(e){const t=document.getElementById(e.detail.targetId);if(t){const n=t.closest(".js-merge-pull-request");if(n){const o=n.closest(".js-details-container");o&&o.classList.add("open")}}}),(0,g.on)("change",".js-admin-merge-override",function({currentTarget:e}){const t=e.closest(".js-merge-message-container"),n=e.checked,o=t.querySelector(".js-merge-box"),s=t.querySelector(".js-auto-merge-box"),r=t.querySelector(".js-merge-form"),c=t.querySelector(".js-auto-merge-form"),p=t.querySelector(".js-queue-branch-form"),D=t.querySelectorAll(".merge-box-button");o&&(o.hidden=!n),s&&(s.hidden=n),r&&(r.hidden=!n),c&&(c.hidden=n),p&&(p.hidden=n);for(const O of D)O.disabled=!n}),(0,g.on)("details-menu-selected",".js-update-branch-method-menu",mn,{capture:!0});function mn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr");n.classList.toggle("is-updating-via-merge",t.value==="merge"),n.classList.toggle("is-updating-via-rebase",t.value==="rebase");const o=n.querySelector(".js-update-branch-type");o&&(o.value=t.value)}i(mn,"updateBranchUpdateMethod"),(0,g.on)("submit",".js-update-branch-form",function({currentTarget:e}){var t;const n=e.closest(".js-merge-pr"),o=n==null?void 0:n.querySelector(".btn-group-update-merge");o&&(o.disabled=!0);const s=n==null?void 0:n.querySelector(".btn-group-update-rebase");s&&(s.disabled=!0);const r=n==null?void 0:n.querySelector(".js-update-method-menu-button");r&&(r.classList.add("disabled","user-select-none"),r.setAttribute("aria-disabled","true"));const c=n==null?void 0:n.querySelector(".js-update-branch-method-menu");c&&((t=c==null?void 0:c.parentNode)==null||t.removeChild(c))}),(0,g.on)("details-menu-selected",".js-merge-method-menu",gn,{capture:!0});function gn(e){const t=e.detail.relatedTarget,n=t.closest(".js-merge-pr"),o=n.querySelector(".js-merge-pull-request"),s=n.querySelector(".js-merge-method-menu-button"),r=s.getAttribute("data-merge-button-class");s.classList.toggle("btn-danger",t.hasAttribute("data-dangerous-action")),r&&s.classList.toggle(r,!t.hasAttribute("data-dangerous-action"));const c=n.querySelector(".js-merge-title"),p=n.querySelector(".js-merge-message");c.defaultValue===c.value&&(c.defaultValue=c.value=t.getAttribute("data-input-title-value")),p.defaultValue===p.value&&(p.defaultValue=p.value=t.getAttribute("data-input-message-value")),n.classList.toggle("is-merging",t.value==="merge"),n.classList.toggle("is-squashing",t.value==="squash"),n.classList.toggle("is-rebasing",t.value==="rebase"),n.classList.toggle("is-merging-group",t.value==="group"),n.classList.toggle("is-merging-solo",t.value==="solo"),n.classList.toggle("is-merging-jump",t.value==="jump");const D=o.classList.contains("js-admin-override-merge")&&t.value==="merge"||o.classList.contains("js-admin-override-squash")&&t.value==="squash"||o.classList.contains("js-admin-override-rebase")&&t.value==="rebase",O=n.querySelector(".js-merge-type");O&&(O.value=t.value);const M=n.querySelectorAll(".js-merge-pull-request .js-merge-commit-button");for(const X of M)X.type=t.value===X.value?"submit":"button";o.classList.toggle("color-fg-danger",D);const U=n.closest(".js-pull-merging"),W=new URL(U.getAttribute("data-url"),window.location.origin),Z=new URLSearchParams(W.search);Z.set("merge_type",t.value),W.search=Z.toString(),U.setAttribute("data-url",W.toString())}i(gn,"updateForMergeMethod"),(0,g.on)("details:toggled",".js-merge-pr",function(e){const n=e.currentTarget.querySelector(".js-merge-message");n&&(0,g.f)(n,"change")}),(0,d.N7)(".branch-action-item.js-details-container.open",{add(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.setAttribute("open","")},remove(e){for(const t of e.querySelectorAll(".js-merge-review-section"))t.removeAttribute("open")}}),(0,g.on)("toggle",".js-details-container .js-merge-review-section",function({currentTarget:e}){const t=e.closest(".js-details-container"),n=t.querySelectorAll(".js-merge-review-section").length,o=t.querySelectorAll(".js-merge-review-section[open]").length;o===0?(0,Ee.Qp)(t,{force:!1}):o===n&&(0,Ee.Qp)(t,{force:!0})},{capture:!0}),(0,d.N7)("poll-include-fragment[data-to-be-polled]",{constructor:fn.Z,add(e){function t(){e.src=e.getAttribute("data-to-be-polled"),e.removeAttribute("data-to-be-polled")}i(t,"onVisible"),document.hidden?document.addEventListener("visibilitychange",t,{once:!0}):t()}}),(0,g.on)("submit",".js-remove-from-queue-form",async e=>{const t=e.currentTarget;e.preventDefault();const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json"}});n&&n.ok||(window.onbeforeunload=()=>{window.scrollTo({top:0})},window.location.reload())});var Pe=m(96776);let Fe=!1;document.addEventListener("keydown",function(e){e.key==="Alt"&&(Fe=!0)}),document.addEventListener("keyup",function(e){e.key==="Alt"&&(Fe=!1)}),(0,g.on)("click",".js-toggle-outdated-comments",function(e){if(!(e instanceof MouseEvent&&e.altKey||Fe)||!(e.currentTarget instanceof HTMLElement))return;const t=e.currentTarget,n=t.closest("details");function o(){const s=n.hasAttribute("open");for(const r of document.querySelectorAll(".js-toggle-outdated-comments"))r!==t&&r.closest("details").toggleAttribute("open",s)}i(o,"toggleAll"),setTimeout(()=>{(0,Pe.uQ)(t,o)})});function gt(){const e=document.querySelectorAll(".pull-request-ref-restore");for(let t=0;t<e.length;t++)e[t].classList.toggle("last",t===e.length-1)}i(gt,"syncLast"),(0,d.N7)(".pull-request-ref-restore",{add:gt,remove:gt});function ht(){const e=document.querySelector("#js-pull-restorable")!=null,t=document.querySelector(".js-pull-discussion-timeline");t&&t.classList.toggle("is-pull-restorable",e)}i(ht,"syncRestorable"),(0,d.N7)("#js-pull-restorable",{add:ht,remove:ht});var hn=m(52134);function pn(e,t){const n=e.closest(".js-review-state-classes"),o=document.querySelector(".js-review-changes");n.classList.toggle("is-review-pending",t>0);for(const s of document.querySelectorAll(".js-pending-review-comment-count"))s.textContent=String(t);for(const s of document.querySelectorAll(".js-pending-comment-count-type"))s instanceof HTMLElement&&(s.textContent=s.getAttribute(t===1?"data-singular-string":"data-plural-string"));if(t>0){o.textContent=o.getAttribute("data-pending-message")||"";const s=e.querySelector(".js-reviews-toggle");s.classList.add("anim-pulse-in"),s.addEventListener("animationend",()=>s.classList.remove("anim-pulse-in"),{once:!0})}else o.textContent=o.getAttribute("data-message")||""}i(pn,"updatePendingCommentsCount");function pt(e){const t=document.querySelector(".js-reviews-container");t&&setTimeout(()=>pn(t,e))}i(pt,"updatePendingHandler"),(0,I.AC)(".js-inline-comment-form",async function(e,t){const n=await t.text();pt(n.json.pendingReviewCommentsCount)}),(0,I.AC)(".js-pending-review-comment .js-comment-delete",async function(e,t){const n=await t.text();pt(n.json.pendingReviewCommentsCount)}),(0,I.AC)(".js-resolvable-timeline-thread-form",async function(e,t){try{const n=await t.html();e.closest(".js-resolvable-timeline-thread-container").replaceWith(n.html)}catch{(0,hn.v)()}}),(0,I.AC)(".js-toggle-user-reviewed-file-form",async function(e,t){const n=e.closest(".js-details-container"),o=!!n.querySelector(".js-reviewed-file"),s=n.classList.contains("open"),r=n.querySelector(".js-file-header"),c=r?r.getBoundingClientRect().top===60:!1;(!o&&s||o&&!s)&&((0,Ee.Qp)(n),c&&(0,C.zT)(n));const p=e.querySelector(".js-reviewed-toggle");o?(p.classList.remove("color-bg-accent","color-border-accent"),p.classList.add("color-fg-muted","color-border-default")):(p.classList.remove("color-fg-muted","color-border-default"),p.classList.add("color-bg-accent","color-border-accent"));const D=p.querySelector(".js-reviewed-checkbox");D.disabled=!0;const O=document.querySelector("progress-bar");O instanceof Ie&&(o?O.decrement():O.increment());const M=document.getElementById(`file-tree-item-${n.id}`);M&&M.toggleAttribute("data-file-user-viewed");const U=await t.html(),W=e.closest(".js-replace-file-header-review");W&&(W.replaceWith(U.html),n.toggleAttribute("data-file-user-viewed"))});function He(e){return e.getAttribute("ratio").split("/")}i(He,"parseRatio");function bt(e){if(e){const[t,n]=He(e),o=parseInt(t)/parseInt(n),s=e.querySelector(".js-review-progress"),r=e.querySelector(".js-review-count");s instanceof HTMLElement&&r&&(s.style.width=`${o*100}%`,r.textContent=`${t} / ${n}`)}}i(bt,"refresh");class Ie extends HTMLElement{static get observedAttributes(){return["ratio"]}attributeChangedCallback(t){t==="ratio"&&bt(this)}connectedCallback(){bt(this)}increment(){const[t,n]=He(this),o=Math.min(parseInt(t)+1,parseInt(n));this.setAttribute("ratio",`${o}/${n}`)}decrement(){const[t,n]=He(this),o=Math.min(parseInt(t)-1,parseInt(n));this.setAttribute("ratio",`${o}/${n}`)}}i(Ie,"ProgressBarElement"),window.customElements.get("progress-bar")||(window.ProgressBarElement=Ie,window.customElements.define("progress-bar",Ie));var bn=m(34782),yn=m(81654);document.addEventListener("pjax:end",function(){for(const e of document.querySelectorAll(".js-pull-refresh-on-pjax"))(0,ke.x0)(e)}),(0,d.N7)(".js-updating-pull-request-commits-count",{add(e){const t=e.textContent,n=document.querySelectorAll(".js-updateable-pull-request-commits-count");for(const o of n)o.textContent=t}}),(async()=>{if(await bn.x,window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_RELOAD){const e=document.getElementById("js-report-pull-request-refresh");e&&(0,yn.Fk)(e)}})();var yt=m(2699),vn=m(97105);function wn(e){const t=e.querySelector(".js-diff-entry-loader"),n=e.querySelector(".js-diff-placeholder"),o=e.querySelector("button.js-diff-load"),s=e.querySelector(".js-button-text");n.setAttribute("fill","url('#animated-diff-gradient')"),s.textContent=o.getAttribute("data-disable-with")||"",o.disabled=!0;const r=new URL(t.getAttribute("data-fragment-url")||"",window.location.origin);return t.src=r.toString(),t.data}i(wn,"expander_loadDiff");function Oe(e){(0,Ee.O4)(e),(0,C.zT)(e)}i(Oe,"scrollIntoView"),(0,E.Z)(i(function(){const t=Sn(window.location.hash);!t||(0,we.Q)(document,t.hashFragment)&&!t.lastLine||Ne(t,0)},"handleHashChange"));function Sn(e){if(!e)return;const t=(0,vn.s)(e);if(!t)return;const n=t[1],o=t[2],s=t[3],r=t[5],c=n+o+s,p=n+o;return{anchor:n,side:o,line:s,lastLine:r,hashFragment:c,partialHashFragment:p}}i(Sn,"parseExpansion");async function Ne(e,t){const{anchor:n,side:o,line:s,lastLine:r,hashFragment:c,partialHashFragment:p}=e,D=(0,we.Q)(document,n);if(!D)return;const O=D.nextElementSibling;if(!O)return;const M=St(O,o,s,r);if(!M.length){const X=(0,we.Q)(document,c);if(X){Oe(X);return}const ne=O.querySelector(".js-diff-load-container");if(!ne)return;try{await wn(ne);const V=(0,we.Q)(document,c);V instanceof HTMLElement&&Oe(V)}catch{Oe(O)}return}await Ln(M,p);const U=1,W=(0,we.Q)(document,c);St(O,o,s,r).length?Ne(e,t):W?Oe(W):t<U&&Ne(e,t+1)}i(Ne,"findAndActivateExpander"),(0,g.on)("click",".js-expand",function(e){e.preventDefault(),vt(e.currentTarget)});function Ln(e,t){return Promise.all(e.map(n=>vt(n,t)))}i(Ln,"activateExpanders");async function vt(e,t){let n;if(t){const M=t.slice(-1)==="R"?"data-right-range":"data-left-range",U=e.getAttribute(M)||"",W=parseInt(U.split("-")[0],10);n=t+W}else n=e.hash.slice(1);const o=e.getAttribute("data-url"),s=new URL(o,window.location.origin),r=new URLSearchParams(s.search.slice(1));r.append("anchor",n),s.search=r.toString(),window.location.hash!==""&&window.history.replaceState(null,"","#");const c=await(0,w.a)(document,s.toString()),p=e.closest(".js-file");if(!p)return;const D=e.closest(".js-expandable-line"),O=wt(D,".file-diff-line");O?(0,Pe.uQ)(O,()=>{D.replaceWith(c)}):D.replaceWith(c),(0,g.f)(p,"expander:expanded"),jn(p)}i(vt,"activateExpander");function wt(e,t){const n=e.nextElementSibling;return n instanceof HTMLElement&&n.matches(t)?n:null}i(wt,"expander_next");function St(e,t,n,o){const s=parseInt(n,10),r=parseInt(o||"",10);return Array.from(e.querySelectorAll(".js-expand")).filter(c=>{const p=t==="R"?"data-right-range":"data-left-range",D=(c.getAttribute(p)||"").split("-"),O=parseInt(D[0],10),M=parseInt(D[1],10);return O<=s&&s<=M||s<=O&&M<=r?!0:O<=r&&r<=M})}i(St,"findExpanders");function jn(e){const t=e.querySelector(".js-expand-full-wrapper");if(!t)return;Array.from(e.querySelectorAll(".js-expand")).length===0&&t.parentElement.removeChild(t)}i(jn,"removeExpandAllButton");async function En(e,t){const n=await self.fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Request to blob_expand failed with status code ${n.status}`);return(0,yt.t)((0,yt.P)(e),n,!0),(await n.json()).map(s=>({...s,content:(0,S.r)(e,s.content)}))}i(En,"fetchManySafeDocumentFragments"),(0,g.on)("click",".js-expand-full",async e=>{e.preventDefault();const t=e.currentTarget,n=t.closest(".file"),o=t.getAttribute("data-url"),s=Cn(n);if(s.length===0)return;const r=new URL(o,window.location.origin),c=new URLSearchParams(r.search.slice(1));for(const M of s)c.append("ranges[]last_left",M.left.start),c.append("ranges[]left",M.left.end),c.append("ranges[]left_hunk_size",M.left.size),c.append("ranges[]last_right",M.right.start),c.append("ranges[]right",M.right.end),c.append("ranges[]right_hunk_size",M.right.size),c.append("ranges[]position",M.position);r.search=c.toString();const p=await En(document,r.toString()),D=[...n.querySelectorAll(".js-expand")];for(const{content:M,position:U}of p){const W=parseInt(U,10),Z=D[W];if(!Z)return;const X=Z.closest(".js-expandable-line"),ne=wt(X,".file-diff-line");ne?(0,Pe.uQ)(ne,()=>{X.after(M)}):X.after(M),X.setAttribute("hidden","true")}t.setAttribute("hidden","true");const O=n.querySelector(".js-collapse-diff");O&&O.removeAttribute("hidden"),n.classList.add("open"),n.classList.add("Details--on")}),(0,g.on)("click",".js-collapse-diff",e=>{const t=e.currentTarget,n=t.closest(".file"),o=[...n.querySelectorAll('.blob-expanded[data-expanded-full="true"]')];for(const c of o)c.parentElement.removeChild(c);const s=[...n.querySelectorAll(".js-expandable-line")];for(const c of s)c.removeAttribute("hidden");t.setAttribute("hidden","true");const r=n.querySelector(".js-expand-full");r&&r.removeAttribute("hidden")});function An(e,t){const o=new URL(e.getAttribute("data-url"),window.location.origin).searchParams;return{position:t.toString(),left:{start:o.get("last_left"),end:o.get("left"),size:o.get("left_hunk_size")},right:{start:o.get("last_right"),end:o.get("right"),size:o.get("right_hunk_size")}}}i(An,"getExpanderRange");function Cn(e){const n=Array.from(e.querySelectorAll(".js-expand")).map((r,c)=>An(r,c));let o=!1;const s=[];for(let r=0;r<n.length;r++){if(o){o=!1;continue}const c=n[r],p=n[r+1];o=p&&c.left.start===p.left.start&&c.left.end===p.left.end&&c.right.start===p.right.start&&c.right.end===p.right.end,s.push(c)}return s}i(Cn,"getAllHunkRanges");class Re{constructor(t){this.selection=t,this.anchorNode=t.anchorNode}range(){var t;let n;return((t=this.selection)==null?void 0:t.rangeCount)>0&&(n=this.selection.getRangeAt(0)),n}canBeSideProtected(){try{return!!(this.hasSelectedText()&&this.confinedTable())}catch{return!1}}isSideProtected(){var t;try{return!!((t=this.confinedTable())==null?void 0:t.getAttribute("data-lock-side-selection"))}catch{return!1}}hasSelectedText(){const t=this.range();return t?t.toString().length>0:!1}clearSelectedText(){this.selection.removeAllRanges()}confinedTable(){var t,n;const o=(n=(t=this.range())==null?void 0:t.commonAncestorContainer)==null?void 0:n.parentElement;return(o==null?void 0:o.matches(".diff-table"))?o:(o==null?void 0:o.matches(".js-file-content"))?o==null?void 0:o.querySelector("table.diff-table"):o==null?void 0:o.closest("table.diff-table")}unprotectedSide(){var t,n;let o;return this.anchorNode instanceof HTMLTableCellElement?o=this.anchorNode.closest("td[data-split-side]"):o=(n=(t=this.anchorNode)==null?void 0:t.parentElement)==null?void 0:n.closest("td[data-split-side]"),o==null?void 0:o.getAttribute("data-split-side")}protectedSide(){return this.unprotectedSide()==="left"?"right":"left"}applySideProtection(){if(this.unprotectedSide()){const t=this.confinedTable(),n=this.unprotectedSide();t&&n&&t.setAttribute("data-lock-side-selection",n)}}clearSideProtection(){const t=document.querySelectorAll("table[data-lock-side-selection]");for(const n of t)n.removeAttribute("data-lock-side-selection")}filteredTableRows(){const t=[];for(let n=0;n<this.selection.rangeCount;n++){const s=this.selection.getRangeAt(n).cloneContents();if(s.querySelectorAll("td").length){const r=`td[data-split-side=${this.protectedSide()}], td.js-linkable-line-number, td.empty-cell`,c=s.querySelectorAll(r);for(const p of c)p.parentNode&&p.parentNode.removeChild(p);t.push(...s.children)}else{const r=document.createElement("TR"),c=document.createElement("TD");c.append(...s.childNodes),r.append(c),t.push(r)}}return t}contentToString(){var t;const n=[],o=document.createElement("table");o.classList.add("invisible"),o.append(...this.filteredTableRows()),(t=this.confinedTable())==null||t.append(o);const s=o.children;for(let r=0;r<s.length;r++){const p=s[r].innerText;p&&(p===`
`?n.push(""):n.push(p))}return o.remove(),n.join(`
`)}}i(Re,"DiffTableSideProtection");function Lt(e){return Math.floor(e/2)}i(Lt,"tableSide");function Tn(e){var t;const n=e.querySelector(".js-comment-button-placeholder");if(n==null?void 0:n.parentElement){const o=document.querySelector(".js-comment-button-template");if(!o)throw new Error("missing js-comment-button-template template element!");const s=n.dataset;if(!s)throw new Error("placeholder element has no dataset");s.originalLine=((t=e.querySelector(".blob-code-inner"))==null?void 0:t.textContent)||"";const r=new $.R(o,s);if(n.parentElement.replaceChild(r,n),s.expandedDiff){const c=e.querySelector(".js-add-line-comment");c&&c.setAttribute("data-expanded-diff",s.expandedDiff)}}}i(Tn,"ensureCommentButton");function $e(e,t){const n=e.parentElement;!n||(Tn(n),xn(n,e,t))}i($e,"onHover");function xn(e,t,n){const o=e.children;let s;if(o.length===4)for(let r=0,c=o.length;r<c;r++)o[r]===t&&(s=Lt(r));for(let r=0,c=o.length;r<c;r++){const p=o[r];(s==null||Lt(r)===s)&&p.classList.toggle("is-hovered",n)}}i(xn,"updateIsHoveredClasses"),(0,d.N7)(".diff-table",function(e){let t=null;function n(){t&&$e(t,!1),t=null}i(n,"onMouseEnter");function o(c){t&&$e(t,!1),c.target instanceof HTMLElement&&(t=c.target.closest("td.blob-code"),t&&$e(t,!0))}i(o,"onMouseOver");function s(){e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",n),e.addEventListener("mouseover",o)}i(s,"add");function r(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",n),e.removeEventListener("mouseover",o)}return i(r,"remove"),{add:s,remove:r}});function jt(e){var t;const n=document.getSelection();if(n){const o=new Re(n);o.isSideProtected()&&((t=e.clipboardData)==null||t.setData("text/plain",o.contentToString()),e.preventDefault())}}i(jt,"copySidedContent");function Et(e){const t=document.getSelection(),n=e.button===2;if(t&&!n){const o=new Re(t);o.isSideProtected()&&(o.clearSelectedText(),o.clearSideProtection())}}i(Et,"clearSidedProtection");function At(){const e=document.getSelection();if(e){const t=new Re(e);t.canBeSideProtected()?t.applySideProtection():t.clearSideProtection()}}i(At,"protectSidedContent"),(0,d.N7)(".js-diff-container",function(){function e(){document.addEventListener("copy",jt),document.addEventListener("mousedown",Et),document.addEventListener("selectionchange",At)}i(e,"add");function t(){document.removeEventListener("copy",jt),document.removeEventListener("mousedown",Et),document.removeEventListener("selectionchange",At)}return i(t,"remove"),{add:e,remove:t}});var Yn=m(94673);function be(){const e=document.querySelector("meta[name=diff-view]"),t=e&&e instanceof HTMLMetaElement?e.content:"",n=document.querySelector(".js-file-diff-split"),o=!!(t==="split"&&n||document.querySelector(".wants-full-width-container"));document.body.classList.toggle("full-width",o)}i(be,"syncBodyClass"),(0,d.N7)("meta[name=diff-view]",{add:be,remove:be}),(0,d.N7)(".js-file-diff-split",{add:be,remove:be}),(0,d.N7)(".js-compare-tab.selected",{add:be,remove:be}),(0,d.N7)(".wants-full-width-container",{add:be,remove:be}),(0,g.on)("change",".js-toggle-file-notes",function(e){const t=e.currentTarget;t.closest(".file").classList.toggle("show-inline-notes",t.checked)});function Ct(e){const t=e.some(n=>n.checked);for(const n of e)(0,oe.Se)(n,!t)}i(Ct,"toggleCheckboxes"),(0,g.on)("click",".js-toggle-all-file-notes",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-notes"));Ct(t),e.preventDefault()}),(0,g.on)("click",".js-toggle-all-file-annotations",function(e){const t=Array.from(document.querySelectorAll(".js-toggle-file-check-annotations"));Ct(t),e.preventDefault()}),(0,d.N7)(".js-inline-comments-container",function(e){let t;const n=e.closest(".file");if(n)return{add:t=i(function(){const s=n.querySelector(".js-inline-comments-container")!=null;n.classList.toggle("has-inline-notes",s)},"remove"),remove:t}}),(0,g.on)("change",".js-toggle-file-check-annotations",function(e){const t=e.currentTarget,n=t.closest(".file").querySelectorAll(".js-inline-annotations");for(const o of n)o instanceof HTMLElement&&(o.hidden=!t.checked)});var kn=Object.defineProperty,qn=Object.getOwnPropertyDescriptor,ye=i((e,t,n,o)=>{for(var s=o>1?void 0:o?qn(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(s=(o?c(t,n,s):c(s))||s);return o&&s&&kn(t,n,s),s},"diff_file_filter_element_decorateClass");let he=i(class extends HTMLElement{connectedCallback(){this.filterState={hideDeletedFiles:!1,hideViewedFiles:!1,showManifestFilesOnly:!1,selectedOwners:[],showCodeownersFiles:!1,selectedFileTypes:[],fileTypeFilterActive:!1,filtersActive:!1}}applyFilter(e){this.filterState=e.detail,this.showResetFilters(),this.filterFiles(),this.filterTreeFiles(),this.hideEmptyDirectories(),this.showBlankslateIfEmpty()}filterFiles(){for(const e of this.diffEntries){const t=e.closest(".js-file.js-details-container");t.hidden=!this.shouldShowFile(e)}}filterTreeFiles(){for(const e of this.treeEntries){const t=this.shouldShowFile(e);e.hidden=!t,e.toggleAttribute("data-skip-substring-filter",!t)}}hideEmptyDirectories(){this.treeRoot&&this.hideEmptyDirectory(this.treeRoot)}hideEmptyDirectory(e){const t=e.getAttribute("data-tree-entry-type")==="root",n=e.getAttribute("data-tree-entry-type")==="directory";if(t||n){const o=e.querySelectorAll(t?":scope > .js-tree-node":":scope > ul > .js-tree-node");let s=0;for(const r of o)s=s+this.hideEmptyDirectory(r);return s===0?(e.hidden=!0,0):(e.hidden=!1,1)}return e.hidden?0:1}async refilterAfterAsyncLoad(){await Promise.resolve(),this.refilterLoadedFiles(),this.showBlankslateIfEmpty()}refilterLoadedFiles(){this.filterState.filtersActive&&this.filterFiles()}shouldShowFile(e){let t=!0;const n=e.getAttribute("data-file-type");return n&&(t=this.filterState.selectedFileTypes.includes(n)),this.filterState.hideViewedFiles&&t&&e.hasAttribute("data-file-user-viewed")&&(t=!1),this.filterState.showCodeownersFiles&&t&&(t=(e.getAttribute("data-codeowners")||"").split(",").filter(s=>this.filterState.selectedOwners.includes(s)).length>0),this.filterState.hideDeletedFiles&&t&&e.getAttribute("data-file-deleted")==="true"&&(t=!1),this.filterState.showManifestFilesOnly&&t&&(e.hasAttribute("data-file-manifest")||(t=!1)),t}showResetFilters(){this.resetFilters&&(this.resetFilters.hidden=!this.filterState.filtersActive)}showBlankslateIfEmpty(){if(!this.blankslate)return;if(this.progressiveLoaders.length>0){this.blankslate.hidden=!0;return}if(this.diffEntries.length===0){this.blankslate.hidden=!0;return}const e=Array.from(this.diffEntries).some(t=>!t.hidden);this.blankslate.hidden=e}},"DiffFileFilterElement");ye([te.fA],he.prototype,"blankslate",2),ye([te.fA],he.prototype,"resetFilters",2),ye([te.GO],he.prototype,"diffEntries",2),ye([te.GO],he.prototype,"progressiveLoaders",2),ye([te.GO],he.prototype,"treeEntries",2),ye([te.fA],he.prototype,"treeRoot",2),ye([(0,ft.D)(20)],he.prototype,"hideEmptyDirectories",1),he=ye([te.Ih],he);var Mn=m(51374),_n=Object.defineProperty,In=Object.getOwnPropertyDescriptor,On=i((e,t,n,o)=>{for(var s=o>1?void 0:o?In(t,n):t,r=e.length-1,c;r>=0;r--)(c=e[r])&&(s=(o?c(t,n,s):c(s))||s);return o&&s&&_n(t,n,s),s},"input_demux_context_wrapper_decorateClass");class Tt{onItemSelected(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;const n=t.currentTarget.querySelector(".js-ref-name").textContent,o=document.querySelector(".js-new-base-branch");o.value=btoa(n||"");const s=document.querySelector(".js-change-base-template").content.cloneNode(!0);s instanceof DocumentFragment&&(0,Mn.W)({content:s})}}i(Tt,"InputDemuxBaseChangeContext");let xt=i(class extends HTMLElement{connectedCallback(){const e=this.getAttribute("data-context-type"),t={baseChange:new Tt};this.context=t[e]}onItemSelected(e){this.context.onItemSelected(e)}},"InputDemuxContextWrapperElement");xt=On([te.Ih],xt);var Jn=m(9115),eo=m(68906),to=m(63355),xe=m(6216),kt=m(76745),Rn=m(95186),Bn=m(11178);let Ue=!1;function We(e,t){return document.querySelector(`#${e}LC${t}`)}i(We,"queryLineElement");function Dn({blobRange:e,anchorPrefix:t}){if(document.querySelectorAll(".js-file-line").length!==0&&(Pn(),!!e)){if(e.start.column===null||e.end.column===null)for(let o=e.start.line;o<=e.end.line;o+=1){const s=We(t,o);s&&s.classList.add("highlighted")}else if(e.start.line===e.end.line&&e.start.column!=null&&e.end.column!=null){const o=(0,xe.M9)(e,s=>We(t,s));if(o){const s=document.createElement("span");s.classList.add("highlighted"),(0,Bn.v)(o,s)}}}}i(Dn,"highlightLines");function Pn(){for(const e of document.querySelectorAll(".js-file-line.highlighted"))e.classList.remove("highlighted");for(const e of document.querySelectorAll(".js-file-line .highlighted")){const t=e.closest(".js-file-line");e.replaceWith(...e.childNodes),t.normalize()}}i(Pn,"clearHighlights");function Fn(){const e=(0,xe.n6)(window.location.hash);Dn(e),Vn();const{blobRange:t,anchorPrefix:n}=e,o=t&&We(n,t.start.line);if(!Ue&&o){o.scrollIntoView();const s=o.closest(".blob-wrapper, .js-blob-wrapper");s.scrollLeft=0}Ue=!1}i(Fn,"scrollLinesIntoView"),(0,E.Z)(function(){if(document.querySelector(".js-file-line-container")){setTimeout(Fn,0);const e=window.location.hash;for(const t of document.querySelectorAll(".js-update-url-with-hash"))if(t instanceof HTMLAnchorElement)t.hash=e;else if(t instanceof HTMLFormElement){const n=new URL(t.action,window.location.origin);n.hash=e,t.action=n.toString()}}});function Hn(e){const t=[];for(const o of e)t.push(o.textContent);const n=document.getElementById("js-copy-lines");if(n instanceof kt.Z){n.textContent=`Copy ${e.length===1?"line":"lines"}`,n.value=t.join(`
`);const o=`Blob, copyLines, numLines:${e.length.toString()}`;n.setAttribute("data-ga-click",o)}}i(Hn,"setCopyLines");function Nn(e){const t=document.querySelector(".js-permalink-shortcut");if(t instanceof HTMLAnchorElement){const n=`${t.href}${window.location.hash}`,o=document.getElementById("js-copy-permalink");if(o instanceof kt.Z){o.value=n;const s=`Blob, copyPermalink, numLines:${e.toString()}`;o.setAttribute("data-ga-click",s)}return n}}i(Nn,"setPermalink");function $n(e,t){const n=document.getElementById("js-new-issue");if(n instanceof HTMLAnchorElement){if(!n.href)return;const o=new URL(n.href,window.location.origin),s=new URLSearchParams(o.search);s.set("permalink",e),o.search=s.toString(),n.href=o.toString(),n.setAttribute("data-ga-click",`Blob, newIssue, numLines:${t.toString()}`)}}i($n,"setOpenIssueLink");function Un(e,t){const n=document.getElementById("js-new-discussion");if(!(n instanceof HTMLAnchorElement)||!(n==null?void 0:n.href))return;const o=new URL(n.href,window.location.origin),s=new URLSearchParams(o.search);s.set("permalink",e),o.search=s.toString(),n.href=o.toString(),n.setAttribute("data-ga-click",`Blob, newDiscussion, numLines:${t.toString()}`)}i(Un,"setOpenDiscussionLink");function Wn(e){const t=document.getElementById("js-view-git-blame");!t||t.setAttribute("data-ga-click",`Blob, viewGitBlame, numLines:${e.toString()}`)}i(Wn,"setViewGitBlame");function Vn(){const e=document.querySelector(".js-file-line-actions");if(!e)return;const t=document.querySelectorAll(".js-file-line.highlighted"),n=t[0];if(n){Hn(t),Wn(t.length);const o=Nn(t.length);o&&$n(o,t.length),o&&Un(o,t.length),e.style.top=`${n.offsetTop-2}px`,e.classList.remove("d-none")}else e.classList.add("d-none")}i(Vn,"showOrHideLineActions");function zn(e){const t=window.scrollY;Ue=!0,e(),window.scrollTo(0,t)}i(zn,"preserveLineNumberScrollPosition"),(0,g.on)("click",".js-line-number",function(e){const t=(0,xe.n6)(e.currentTarget.id),{blobRange:n}=t,o=(0,xe.G5)(window.location.hash);o&&e.shiftKey&&(t.blobRange={start:o.start,end:n.end}),zn(()=>{window.location.hash=(0,xe.Dw)(t)})}),(0,g.on)("submit",".js-jump-to-line-form",function(e){const o=e.currentTarget.querySelector(".js-jump-to-line-field").value.replace(/[^\d-]/g,"").split("-").map(s=>parseInt(s,10)).filter(s=>s>0).sort((s,r)=>s-r);o.length&&(window.location.hash=`L${o.join("-L")}`),e.preventDefault()}),(0,d.N7)(".js-check-bidi",Gn);const Kn=/[\u202A-\u202E]|[\u2066-\u2069]/,qt={"\u202A":"U+202A","\u202B":"U+202B","\u202C":"U+202C","\u202D":"U+202D","\u202E":"U+202E","\u2066":"U+2066","\u2067":"U+2067","\u2068":"U+2068","\u2069":"U+2069"};function Mt(e,t){if(e.nodeType===Node.TEXT_NODE)return Qn(e,t);if(!e.childNodes||!e.childNodes.length)return!1;let n=!1;for(const o of e.childNodes)if(n||(n=Mt(o,t)),n&&!t)break;return n}i(Mt,"checkNodeForBidiCharacters");function Qn(e,t){let n=!1;if(e.nodeValue)for(let o=e.nodeValue.length-1;o>=0;o--){const s=e.nodeValue.charAt(o);if(qt[s]){if(n=!0,!t)break;const r=new $.R(t,{revealedCharacter:qt[s]}),c=new Range;c.setStart(e,o),c.setEnd(e,o+1),c.deleteContents(),c.insertNode(r)}}return n}i(Qn,"checkTextNodeForBidiCharacters");function Gn(e){let t=!1;const n=performance.now(),o=e.textContent||"";if(Kn.test(o)){const c=e.querySelectorAll(".diff-table .blob-code-inner, .js-file-line-container .js-file-line, .js-suggested-changes-blob .blob-code-inner"),p=document.querySelector(".js-line-alert-template"),D=document.querySelector(".js-revealed-character-template");for(const O of c)if(Mt(O,D)&&(t=!0,p)){const M=new $.R(p,{});e.getAttribute("data-line-alert")==="before"?O.before(M):O.after(M)}}const r={durationMs:(performance.now()-n).toString(),result:t.toString()};if((0,Rn.q)("blob_js_check_bidi_character",r),t){const c=document.querySelector(".js-file-alert-template");if(c){const p=new URL(window.location.href,window.location.origin);p.searchParams.get("h")==="1"?p.searchParams.delete("h"):p.searchParams.set("h","1");const D=new $.R(c,{revealButtonHref:p.href});e.prepend(D)}}e.classList.remove("js-check-bidi")}i(Gn,"alertOnBidiCharacter");class _t{constructor(t,n){this.lineElement=t,this.numberElement=n}range(t,n){t=isNaN(t)?0:t,n=isNaN(n)?0:n;let o=null,s=0,r=0;for(const[p,D]of this.lineElement.childNodes.entries()){const O=(D.textContent||"").length;if(O>t&&!o&&(o=D,s=p),O>=n){r=p;break}t-=O,n-=O}const c=document.createRange();if(s===r){for(;o&&o.nodeName!=="#text";)o=o.childNodes[0];if(!o)return null;c.setStart(o,t),c.setEnd(o,n)}else c.setStart(this.lineElement,s),c.setEnd(this.lineElement,r+1);return c}}i(_t,"CodeListingLine");class It{constructor(t){this.container=t}findLine(t){if(!t)return null;const n=this.container.querySelector(`.js-blob-rnum[data-line-number='${t}']`);if(!n)return null;let o=n.nextElementSibling;return!o||!o.classList.contains("js-file-line")?null:(o=o.querySelector(".js-code-nav-pass")||o,new _t(o,n))}}i(It,"CodeListing");const Ot=new WeakMap;function Rt(e){const t=e.closest(".js-blob-code-container, .js-file-content"),n=e.querySelector(".js-codeowners-error-tooltip-template"),o=e.querySelector(".js-codeowners-error-line-alert-template");if(!t||!n||!o)return;const s=e.querySelectorAll(".js-codeowners-error"),r=new It(t);for(const c of s){if(Ot.get(c))continue;const p=c.getAttribute("data-line"),D=c.getAttribute("data-kind"),O=c.getAttribute("data-suggestion"),M=parseInt(c.getAttribute("data-start-offset")||"",10),U=parseInt(c.getAttribute("data-end-offset")||"",10),W=r.findLine(p),Z=W==null?void 0:W.range(M,U);if(!W||!Z)continue;let X=D;O&&(X+=`: ${O}`);const ne=document.createElement("SPAN");ne.className="error-highlight",Z.surroundContents(ne);const V=new $.R(n,{message:X}).firstElementChild;Z.surroundContents(V);const ae=new $.R(o,{});W.numberElement.appendChild(ae),Ot.set(c,!0)}}i(Rt,"annotateCodeownersErrors"),(0,d.N7)(".js-codeowners-errors",Rt),(0,g.on)("expander:expanded",".js-file",function(e){if(!e.target||!(e.target instanceof HTMLElement))return;const t=e.target.querySelector(".js-codeowners-errors");!t||Rt(t)})},79046:(z,B,m)=>{m.d(B,{O4:()=>R,jo:()=>q,Qp:()=>v});var g=m(70130),C=m(59753);const j="ontransitionend"in window;function x(A,_){if(!j){_();return}const H=Array.from(A.querySelectorAll(".js-transitionable"));A.classList.contains("js-transitionable")&&H.push(A);for(const P of H){const ee=E(P);P instanceof HTMLElement&&(P.addEventListener("transitionend",()=>{P.style.display="",P.style.visibility="",ee&&d(P,function(){P.style.height=""})},{once:!0}),P.style.boxSizing="content-box",P.style.display="block",P.style.visibility="visible",ee&&d(P,function(){P.style.height=getComputedStyle(P).height}),P.offsetHeight)}_();for(const P of H)if(P instanceof HTMLElement&&E(P)){const ee=getComputedStyle(P).height;P.style.boxSizing="",ee==="0px"?P.style.height=`${P.scrollHeight}px`:P.style.height="0px"}}i(x,"performTransition");function E(A){return getComputedStyle(A).transitionProperty==="height"}i(E,"isTransitioningHeight");function d(A,_){A.style.transition="none",_(),A.offsetHeight,A.style.transition=""}i(d,"withoutTransition");var y=m(96776);function b(A,_){_.find(H=>{const P=A.querySelectorAll(H),ee=P[P.length-1];if(ee&&document.activeElement!==ee)return ee.focus(),!0})}i(b,"findAndFocusByQuerySelector");function l(A){b(A,[".js-focus-on-dismiss","input[autofocus], textarea[autofocus]"])}i(l,"restoreAutofocus");function u(A){!A.classList.contains("tooltipped")||(A.classList.remove("tooltipped"),A.addEventListener("mouseleave",()=>{A.classList.add("tooltipped"),A.blur()},{once:!0}))}i(u,"hideTooltip");function L(A){return[...document.querySelectorAll(".js-details-container")].filter(_=>_.getAttribute("data-details-container-group")===A)}i(L,"groupMembers");function a(A){return[...A.querySelectorAll(".js-details-target")].filter(_=>_.closest(".js-details-container")===A)}i(a,"containerTargets");function f(A,_){const H=A.getAttribute("data-details-container-group");return H?((0,y.uQ)(A,()=>{for(const P of L(H))P!==A&&h(P,_)}),H):null}i(f,"toggleGroup");function h(A,_){A.classList.toggle("open",_),A.classList.toggle("Details--on",_);for(const H of a(A))H.setAttribute("aria-expanded",_.toString())}i(h,"updateOpenState");function v(A,_){var H,P;const ee=A.getAttribute("data-details-container")||".js-details-container",se=A.closest(ee),ie=(H=_==null?void 0:_.force)!=null?H:!se.classList.contains("open"),fe=(P=_==null?void 0:_.withGroup)!=null?P:!1;x(se,()=>{h(se,ie);const T=fe?f(se,ie):null;Promise.resolve().then(()=>{l(se),u(A),se.dispatchEvent(new CustomEvent("details:toggled",{bubbles:!0,cancelable:!1,detail:{open:ie}})),T&&se.dispatchEvent(new CustomEvent("details:toggled-group",{bubbles:!0,cancelable:!1,detail:{open:ie,group:T}}))})})}i(v,"toggleDetailsTarget");function q(A){const _=A.getAttribute("data-details-container")||".js-details-container",P=A.closest(_).classList;return P.contains("Details--on")||P.contains("open")}i(q,"isDetailsTargetExpanded");function k(A){const _=A.altKey,H=A.currentTarget;v(H,{withGroup:_}),A.preventDefault()}i(k,"handleDetailsTargetClick"),(0,C.on)("click",".js-details-target",k),(0,g.Z)(function({target:A}){A&&R(A)});function R(A){let _=!1,H=A.parentElement;for(;H;)H.classList.contains("Details-content--shown")&&(_=!0),H.classList.contains("js-details-container")&&(H.classList.toggle("open",!_),H.classList.toggle("Details--on",!_),_=!1),H=H.parentElement}i(R,"ensureExpanded")},70130:(z,B,m)=>{m.d(B,{Z:()=>x});var g=m(34782);const C=[];let j=0;function x(l){(async function(){C.push(l),await g.x,E()})()}i(x,"hashChange"),x.clear=()=>{C.length=j=0};function E(){const l=j;j=C.length,d(C.slice(l),null,window.location.href)}i(E,"runRemainingHandlers");function d(l,u,L){const a=window.location.hash.slice(1),f=a?document.getElementById(a):null,h={oldURL:u,newURL:L,target:f};for(const v of l)v.call(null,h)}i(d,"runHandlers");let y=window.location.href;window.addEventListener("popstate",function(){y=window.location.href}),window.addEventListener("hashchange",function(l){const u=window.location.href;try{d(C,l.oldURL||y,u)}finally{y=u}});let b=null;document.addEventListener("pjax:start",function(){b=window.location.href}),document.addEventListener("pjax:end",function(){d(C,b,window.location.href)})},42474:(z,B,m)=>{m.d(B,{h:()=>C});var g=m(59753);(0,g.on)("click",".js-skip-to-content",function(b){const l=document.getElementById("start-of-content");if(l){const u=l.nextElementSibling;u instanceof HTMLElement&&(u.setAttribute("tabindex","-1"),u.setAttribute("data-skipped-to-content","1"),u.focus())}b.preventDefault()});function C(){let b=!1;const l=document.getElementById("start-of-content");if(l){const u=l.nextElementSibling;if(u instanceof HTMLElement)return b=u.getAttribute("data-skipped-to-content")==="1",b&&u.removeAttribute("data-skipped-to-content"),b}}i(C,"hasSkippedToContent");const j="ontouchstart"in document;function x(){return window.innerWidth>1012}i(x,"compatibleDesktop");for(const b of document.querySelectorAll(".HeaderMenu-details"))b.addEventListener("toggle",d),j||(b.addEventListener("mouseover",y),b.addEventListener("mouseleave",y));let E=!1;function d(b){if(!E){E=!0;for(const l of document.querySelectorAll(".HeaderMenu-details"))l!==b.currentTarget&&l.removeAttribute("open");setTimeout(()=>E=!1)}}i(d,"onMenuToggle");function y(b){const{currentTarget:l}=b;!(l instanceof HTMLElement)||!x()||(b.type==="mouseover"&&b instanceof MouseEvent?b.target instanceof Node&&b.relatedTarget instanceof Node&&l.contains(b.target)&&!l.contains(b.relatedTarget)&&l.setAttribute("open",""):l.removeAttribute("open"))}i(y,"onMenuHover")},17364:(z,B,m)=>{m.d(B,{$:()=>b,G:()=>y});var g=m(86404),C=m(64463),j=m(59753);(0,C.N7)("include-fragment, poll-include-fragment",{subscribe:u=>(0,g.qC)((0,g.RB)(u,"error",d),(0,g.RB)(u,"loadstart",E))}),(0,j.on)("click","include-fragment button[data-retry-button]",({currentTarget:u})=>{const L=u.closest("include-fragment"),a=L.src;L.src="",L.src=a});function x(u,L){const a=u.currentTarget;if(a instanceof Element){for(const f of a.querySelectorAll("[data-show-on-error]"))f instanceof HTMLElement&&(f.hidden=!L);for(const f of a.querySelectorAll("[data-hide-on-error]"))f instanceof HTMLElement&&(f.hidden=L)}}i(x,"toggleElements");function E(u){x(u,!1)}i(E,"onLoad");function d(u){x(u,!0)}i(d,"onError");function y({currentTarget:u}){u instanceof Element&&b(u)}i(y,"loadDeferredContentByEvent");function b(u){const L=u.closest("details");L&&l(L)}i(b,"loadDeferredContent");function l(u){const L=u.getAttribute("data-deferred-details-content-url");if(L){u.removeAttribute("data-deferred-details-content-url");const a=u.querySelector("include-fragment, poll-include-fragment");a&&(a.src=L)}}i(l,"setIncludeFragmentSrc")},95140:(z,B,m)=>{m.d(B,{j:()=>x,w:()=>E});var g=m(59753),C=m(78694),j=m(84570);(0,g.on)("click",".js-toggle-inline-comment-form",function(d){const y=d.currentTarget.closest(".js-line-comments");x(y)}),(0,g.on)("quote-selection",".js-line-comments",function(d){x(d.currentTarget),d.stopPropagation()}),(0,j.w4)("keydown",".js-inline-comment-form-container form .js-comment-field",function(d){const y=d.target;if(!y.classList.contains("js-navigation-enable")&&d.key==="Escape"&&y.value.length===0){const b=y.closest("form");E(b),d.preventDefault()}}),(0,g.on)("click",".js-hide-inline-comment-form",function(d){const y=d.currentTarget.closest("form");!(0,C.T)(y)||confirm(d.target.getAttribute("data-confirm-cancel-text"))?E(y):d.preventDefault()});function x(d){var y;const b=d.querySelector(".js-inline-comment-form-container");b.classList.add("open"),(y=b.querySelector(".js-write-tab"))==null||y.click(),b.querySelector(".js-comment-field").focus(),(0,g.f)(b,"inlinecomment:focus")}i(x,"focusForm");function E(d){d.reset();const y=d.closest(".js-inline-comment-form-container");y.classList.remove("open");const b=y.querySelector(".js-multi-line-preview");b&&(b.hidden=!0),(0,g.f)(y,"inlinecomment:collapse")}i(E,"blurForm")},24930:(z,B,m)=>{m.d(B,{O3:()=>x,_g:()=>C,lB:()=>j});let g=0;function C(){return g}i(C,"getBaseStickyHeaderHeight");function j(E){g=E,E?document.body.style.setProperty("--base-sticky-header-height",`${E}px`):document.body.style.removeProperty("--base-sticky-header-height")}i(j,"setBaseStickyHeaderHeight");const x="var(--base-sticky-header-height, 0px)"},54235:(z,B,m)=>{m.d(B,{H:()=>u});var g=m(42474),C=m(34782),j=m(64463),x=m(24930);let E=!1;const d=[];function y(){d.length?b():l()}i(y,"manageObservers");function b(){E||(window.addEventListener("resize",L),document.addEventListener("scroll",L),E=!0)}i(b,"addObservers");function l(){window.removeEventListener("resize",L),document.removeEventListener("scroll",L),E=!1}i(l,"removeObservers");function u(){a(!0)}i(u,"forceStickyRelayout");function L(){a()}i(L,"checkElementsForStickingHandler");function a(T=!1){for(const F of d)if(F.element.offsetHeight>0){const{element:$,placeholder:oe,top:w}=F,S=$.getBoundingClientRect();if(oe){const I=oe.getBoundingClientRect();$.classList.contains("is-stuck")?I.top>ie($,w)?v(F):q(F):S.top<=ie($,w)?h(F):T&&q(F)}else S.top-ie($,w)<.1?h(F):v(F)}}i(a,"checkElementsForSticking");function f(T){const{position:F}=window.getComputedStyle(T);return/sticky/.test(F)}i(f,"browserHasSticky");function h({element:T,placeholder:F,top:$}){if(F){const oe=T.getBoundingClientRect();fe(T,ie(T,$)),T.style.left=`${oe.left}px`,T.style.width=`${oe.width}px`,T.style.marginTop="0",T.style.position="fixed",F.style.display="block"}T.classList.add("is-stuck")}i(h,"pinSet");function v({element:T,placeholder:F}){F&&(T.style.position="static",T.style.marginTop=F.style.marginTop,F.style.display="none"),T.classList.remove("is-stuck")}i(v,"unpinSet");function q({element:T,placeholder:F,offsetParent:$,top:oe}){if(F&&!(0,g.h)()){const w=T.getBoundingClientRect(),S=F.getBoundingClientRect();if(fe(T,ie(T,oe)),T.style.left=`${S.left}px`,T.style.width=`${S.width}px`,$){const I=$.getBoundingClientRect();I.bottom<w.height+parseInt(String(oe))&&(T.style.top=`${I.bottom-w.height}px`)}}}i(q,"updatePinnedSet");function k(T){if(f(T))return null;const F=T.previousElementSibling;if(F&&F.classList.contains("is-placeholder"))return F;const $=document.createElement("div");return $.style.visibility="hidden",$.style.display="none",$.style.height=window.getComputedStyle(T).height,$.className=T.className,$.classList.remove("js-sticky"),$.classList.add("is-placeholder"),T.parentNode.insertBefore($,T)}i(k,"findOrCreatePlaceholder");function R(T){const F=k(T),$=window.getComputedStyle(T).position;T.style.position="static";const oe=T.offsetParent;T.style.position="fixed";const w=se(T),S={element:T,placeholder:F,offsetParent:oe,top:w==="auto"?0:parseInt(w||"0")};T.style.position=$,d.push(S)}i(R,"createSet");function A(T){const F=d.map($=>$.element).indexOf(T);d.splice(F,1)}i(A,"removeSet");async function _(T){await C.C,R(T),a(),y()}i(_,"initializeSet"),(0,j.N7)(".js-sticky",{constructor:HTMLElement,add(T){_(T)},remove(T){A(T),y()}}),(0,j.N7)(".js-notification-top-shelf",{constructor:HTMLElement,add(T){H(T)},remove(){for(const T of document.querySelectorAll(".js-notification-top-shelf"))T.remove();(0,x._g)()>0&&((0,x.lB)(0),P(),u())}}),(0,j.N7)(".js-notification-shelf-offset-top, .js-position-sticky",{constructor:HTMLElement,add:ee});async function H(T){if(T.offsetParent===null)return;await C.C;const F=Math.floor(T.getBoundingClientRect().height);F>0&&((0,x.lB)(F),P(),u())}i(H,"initializeNotificationShelf");function P(){for(const T of document.querySelectorAll(".js-position-sticky, .js-notification-shelf-offset-top"))ee(T)}i(P,"updateTopOffsets");function ee(T){if(T.classList.contains("js-notification-top-shelf"))return;const F=parseInt(se(T))||0;fe(T,F+(0,x._g)())}i(ee,"updateTopOffset");function se(T){const F=T.getAttribute("data-original-top");if(F!=null)return F;const $=window.getComputedStyle(T).top;return T.setAttribute("data-original-top",$),$}i(se,"getOriginalTop");function ie(T,F){return T.classList.contains("js-notification-top-shelf")?F:F+(0,x._g)()}i(ie,"withShelfOffset");function fe(T,F){T.style.setProperty("top",`${F}px`,"important")}i(fe,"setTopImportant")},6216:(z,B,m)=>{m.d(B,{Dw:()=>E,G5:()=>g,M9:()=>y,n6:()=>x});function g(a){const f=a.match(/#?(?:L)(\d+)((?:C)(\d+))?/g);if(f)if(f.length===1){const h=d(f[0]);return h?Object.freeze({start:h,end:h}):void 0}else if(f.length===2){const h=d(f[0]),v=d(f[1]);return!h||!v?void 0:u(Object.freeze({start:h,end:v}))}else return;else return}i(g,"parseBlobRange");function C(a){const{start:f,end:h}=u(a);return f.column!=null&&h.column!=null?`L${f.line}C${f.column}-L${h.line}C${h.column}`:f.line===h.line?`L${f.line}`:`L${f.line}-L${h.line}`}i(C,"formatBlobRange");function j(a){const f=a.match(/(file-.+?-)L\d+?/i);return f?f[1]:""}i(j,"parseAnchorPrefix");function x(a){const f=g(a),h=j(a);return{blobRange:f,anchorPrefix:h}}i(x,"parseFileAnchor");function E({anchorPrefix:a,blobRange:f}){return f?`#${a}${C(f)}`:"#"}i(E,"formatBlobRangeAnchor");function d(a){const f=a.match(/L(\d+)/),h=a.match(/C(\d+)/);return f?Object.freeze({line:parseInt(f[1]),column:h?parseInt(h[1]):null}):null}i(d,"parseBlobOffset");function y(a,f){const[h,v]=b(a.start,!0,f),[q,k]=b(a.end,!1,f);if(!h||!q)return;let R=v,A=k;if(R===-1&&(R=0),A===-1&&(A=q.childNodes.length),!h.ownerDocument)throw new Error("DOMRange needs to be inside document");const _=h.ownerDocument.createRange();return _.setStart(h,R),_.setEnd(q,A),_}i(y,"DOMRangeFromBlob");function b(a,f,h){const v=[null,0],q=h(a.line);if(!q)return v;if(a.column==null)return[q,-1];let k=a.column-1;const R=l(q);for(let A=0;A<R.length;A++){const _=R[A],H=k-(_.textContent||"").length;if(H===0){const P=R[A+1];return f&&P?[P,0]:[_,k]}else if(H<0)return[_,k];k=H}return v}i(b,"findRangeOffset");function l(a){if(a.nodeType===Node.TEXT_NODE)return[a];if(!a.childNodes||!a.childNodes.length)return[];let f=[];for(const h of a.childNodes)f=f.concat(l(h));return f}i(l,"getAllTextNodes");function u(a){const f=[a.start,a.end];return f.sort(L),f[0]===a.start&&f[1]===a.end?a:Object.freeze({start:f[0],end:f[1]})}i(u,"ascendingBlobRange");function L(a,f){return a.line===f.line&&a.column===f.column?0:a.line===f.line&&typeof a.column=="number"&&typeof f.column=="number"?a.column-f.column:a.line-f.line}i(L,"compareBlobOffsets")},51374:(z,B,m)=>{m.d(B,{W:()=>C});var g=m(59753);async function C(j){const E=document.querySelector("#site-details-dialog").content.cloneNode(!0),d=E.querySelector("details"),y=d.querySelector("details-dialog"),b=d.querySelector(".js-details-dialog-spinner");j.detailsClass&&d.classList.add(...j.detailsClass.split(" ")),j.dialogClass&&y.classList.add(...j.dialogClass.split(" ")),j.label?y.setAttribute("aria-label",j.label):j.labelledBy&&y.setAttribute("aria-labelledby",j.labelledBy),document.body.append(E);const l=await j.content;return b.remove(),y.prepend(l),d.addEventListener("toggle",()=>{d.hasAttribute("open")||((0,g.f)(y,"dialog:remove"),d.remove())}),y}i(C,"dialog")},96310:(z,B,m)=>{m.d(B,{X:()=>C});var g=m(40728);function C(j,x,E,d,y,b,l,u){const L=document.querySelector(".js-file-filter"),a=new URL(window.location.href,window.location.origin);if(!j&&!d)return x||b?void 0:(a.search="",(0,g.lO)((0,g.y0)(),"",a.toString()));const f=L.querySelector(".js-file-filter-form"),h=new FormData(f),v=E.filter(R=>!h.getAll("file-filters[]").includes(R)),q=y.filter(R=>!h.getAll("owned-by[]").includes(R));for(const R of v)h.append("file-filters[]",R);for(const R of q)h.append("owned-by[]",R);const k=new URLSearchParams(h);(!k.has("file-filters[]")||k.toString()==="")&&k.set("file-filters[]",""),x&&k.set("w","1"),b&&k.set("manifests","true"),l&&k.set("show-deleted-files","false"),u&&k.set("show-viewed-files","false"),k.delete("authenticity_token"),a.search=k.toString(),(0,g.lO)((0,g.y0)(),"",a.toString())}i(C,"updateURLState")},97105:(z,B,m)=>{m.d(B,{s:()=>g});function g(C){const j=C.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(j!=null&&j.length===6)return j;const x=C.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return x!=null&&x.length===6?x:null}i(g,"matchHash")},70497:(z,B,m)=>{m.d(B,{MO:()=>k,vu:()=>f,Oz:()=>v});var g=m(14037);class C{constructor(S,I,N){this.diffId=S,this.side=I,this.lineNumber=N,this.element=(0,g.Q)(document,this.anchor())}sideForCommenting(){return this.element&&this.element.classList.contains("blob-num-context")?"right":{R:"right",L:"left"}[this.side]}isContext(){return this.element?this.element.classList.contains("blob-num-context"):!1}anchor(){return`${this.diffId}${this.anchorSuffix()}`}anchorSuffix(){return`${this.side}${this.lineNumber}`}is(S){return this.diffId===S.diffId&&this.side===S.side&&this.lineNumber===S.lineNumber}}i(C,"DiffPosition");class j{constructor(S,I,N,G,K){this.elements=new Set,this.isParsed=!1,this.isSplit=!1,this._rows=new Set,this._isAcrossHunks=!1,this._isContextOnly=!0,this._includesExpandedLine=!1,this._commentOutsideTheDiff=!1,this.diffId=S,this.diffTable=document.querySelector(`.js-diff-table[data-diff-anchor="${S}"]`),this.diffTable&&(this.isSplit=this.diffTable.classList.contains("js-file-diff-split")),this.start=new C(S,I,N),this.end=new C(S,G,K),this.lineCount=0,this.parse()}anchor(){const S=[];return S.push(this.start.anchor()),this.start.is(this.end)||S.push(this.end.anchorSuffix()),S.join("-")}parse(){if(!this.diffTable)return;let S=this.unify(this.diffTable.querySelectorAll(".js-linkable-line-number"));S=this.filterInRange(S),this.lineCount=S.length,this.elements=this.expandRelatedElements(S),this._commentOutsideTheDiff=this.diffTable.classList.contains("js-comment-outside-the-diff"),this.isParsed=!0}unify(S){if(!this.isSplit)return Array.from(S);const I=[];let N=[],G=[];for(const K of S)K.classList.contains("blob-num-addition")?N.push(K):K.classList.contains("blob-num-deletion")?G.push(K):(I.push(...G,...N,K),N=[],G=[]);return I.push(...G,...N),I}filterInRange(S){if(!this.start.element||!this.end.element)return[];let I=S.indexOf(this.start.element),N=S.indexOf(this.end.element);if(I>N){[I,N]=[N,I];const[G,K]=[this.end,this.start];this.start=G,this.end=K}return S.slice(I,N+1)}isContextOnly(){return this.isParsed||this.parse(),this._isContextOnly}isAcrossHunks(){return this.isParsed||this.parse(),this._isAcrossHunks}includesExpandedLine(){return this.isParsed||this.parse(),this._includesExpandedLine}commentOutsideTheDiffEnabled(){return this.isParsed||this.parse(),this._commentOutsideTheDiff}rows(){return this.isParsed||this.parse(),this._rows}expandRelatedElements(S){const I=this.isSplit,N=S[0],G=S[S.length-1];if(N&&G){const J=N.closest("[data-hunk]"),Q=G.closest("[data-hunk]");if(J&&Q){const Y=J.getAttribute("data-hunk"),ce=Q.getAttribute("data-hunk");Y!==ce&&(this._isAcrossHunks=!0)}}const K=i((J,Q)=>{!this._includesExpandedLine&&Q.closest(".blob-expanded")&&(this._includesExpandedLine=!0);const Y=Q.parentElement;Y instanceof HTMLElement&&this._rows.add(Y);const ce=Q.classList.contains("blob-num-deletion")||Q.classList.contains("blob-num-addition");if(ce&&(this._isContextOnly=!1),!Y)return J;if(I&&ce)return Array.from(Y.children).indexOf(Q)<2?J.add(Y.children[0]).add(Y.children[1]):J.add(Y.children[2]).add(Y.children[3]);for(const ge of Array.from(Y.children))J.add(ge);return J},"expander");return S.reduce(K,new Set)}}i(j,"DiffRange");var x=m(70130),E=m(97105),d=m(64463),y=m(59753),b=m(81654);let l=null,u=null,L=!1,a=null;function f(){return l}i(f,"getCurrentRange");function h(w){return!!w.closest(".js-multi-line-comments-enabled")}i(h,"isMultiLineCommentingEnabled");function v(w,S){if(!h(w))return!1;const{start:{lineNumber:I},end:{lineNumber:N}}=S;return!(I===N&&S.isContextOnly()||!S.commentOutsideTheDiffEnabled()&&(S.isAcrossHunks()||S.includesExpandedLine()))}i(v,"isMultiLineCommentAllowed");function q(w){return w.closest(".js-diff-table").classList.contains("is-selecting")}i(q,"isSelecting");function k(){window.history.replaceState(null,"","#"),$()}i(k,"clearSelection");function R(w,S){let I=w.id;if(S){const N=(0,E.s)(I);if(!N)return;const G=N[1],K=N[2],J=N[3];if(l&&l.diffId===G){if(K===l.start.side&&J<l.start.lineNumber)return;const Q=new j(G,l.start.side,l.start.lineNumber,K,+J);I=Q.anchor();const Y=w.closest(".js-file-content[data-hydro-view]");Y instanceof HTMLElement&&oe(Y,Q),L&&q(w)&&w.closest(".js-diff-table").classList.toggle("is-commenting",v(w,Q)),u=i(function(){if(v(w,Q)){const ge=`.js-add-line-comment[data-side="${Q.end.sideForCommenting()}"]`,je=w.closest("tr").querySelector(ge);je&&Q&&je.click()}},"showMultiLineCommentForm")}}window.history.replaceState(null,"",`#${I}`),$()}i(R,"setSelection");function A(w){if(!(w instanceof HTMLElement))return null;if(w.classList.contains("js-linkable-line-number"))return w;const S=w.previousElementSibling;return S?A(S):null}i(A,"nearestLinkableLineNumber");function _(w){!l||w.target.closest(".js-diff-table")||(window.history.replaceState(null,"","#"),$())}i(_,"handleClick");function H(){if(!a)return;R(a,!1);const w=a.closest(".js-diff-table");a=null,w.classList.add("is-selecting"),w.classList.add("is-commenting"),document.addEventListener("mouseup",function(S){w.classList.remove("is-selecting"),w.classList.remove("is-selecting","is-commenting"),u&&u(),u=null,fe(w),S.preventDefault()},{once:!0})}i(H,"beginDrag");function P(w){const S=A(w);!S||!q(S)||R(S,!0)}i(P,"commentSelectionMouseverToCode");function ee(w){!q(w)||R(w,!0)}i(ee,"commentSelectionMouseverToLineNumbers");function se(w){const S=w.target;if(!(S instanceof Element))return;a&&H();const I=S.closest(".blob-code, .js-linkable-line-number");if(!!I){if(I.classList.contains("blob-code"))return P(I);I.classList.contains("js-linkable-line-number")&&ee(I)}}i(se,"handleDragMouseEvent");function ie(w){w.addEventListener("mouseenter",se,{capture:!0})}i(ie,"addCommentSelectionEvents");function fe(w){L=!1,w.removeEventListener("mouseenter",se,{capture:!0}),setTimeout(()=>{document.addEventListener("click",_,{once:!0})},0)}i(fe,"removeCommentSelectionEvents"),(0,y.on)("mousedown",".js-add-line-comment",function(w){if(!(w instanceof MouseEvent)||w.button!==0)return;const S=w.target.parentElement;if(!S||!h(w.target))return;const I=A(S);if(!I)return;const N=w.target.closest(".js-diff-table");ie(N),a=I,L=!0,w.target.addEventListener("mouseup",function(){fe(N),a=null,L=!1},{once:!0}),l&&l.lineCount>1&&w.preventDefault()}),(0,y.on)("mousedown",".js-linkable-line-number",function(w){if(!(w instanceof MouseEvent)||w.button!==0)return;const S=w.target;if(!(S instanceof Element))return;const I=S.closest(".js-diff-table");I.classList.add("is-selecting"),ie(I),document.addEventListener("mouseup",function(){S.closest(".js-diff-table").classList.remove("is-selecting"),fe(I)},{once:!0}),R(S,w instanceof MouseEvent&&w.shiftKey),w.preventDefault()});function T(){if(!l)return;for(const K of l.elements)K.classList.add("selected-line");const w=[],S=[],I=[],N=[];for(const K of l.rows()){const[J,Q,Y,ce]=K.children;w.push(J),S.push(Q),I.push(Y),N.push(ce)}function G(K){for(const[J,Q]of K.entries()){if(Q.classList.contains("empty-cell"))continue;const Y=K[J-1];(!Y||!Y.classList.contains("selected-line"))&&Q.classList.add("selected-line-top");const ce=K[J+1];(!ce||!ce.classList.contains("selected-line"))&&Q.classList.add("selected-line-bottom")}}i(G,"doBorder"),G(w),G(S),G(I),G(N);for(const[K,J]of S.entries())N[K].classList.contains("selected-line")||J.classList.add("selected-line-right");for(const[K,J]of I.entries())S[K].classList.contains("selected-line")||J.classList.add("selected-line-left")}i(T,"drawBorderForSplit");function F(){if(!l)return;for(const N of l.elements)N.classList.add("selected-line");const w=Array.from(l.rows()),S=w[0];for(const N of S.children)N.classList.add("selected-line-top");const I=w[w.length-1];for(const N of I.children)N.classList.add("selected-line-bottom")}i(F,"drawBorderForUnified");function $(){if(l){for(const Y of l.elements)Y.classList.remove("selected-line","selected-line-top","selected-line-bottom","selected-line-left","selected-line-right");l=null}const w=(0,E.s)(window.location.hash);if(!w)return;const S=w[1],I=w[2],N=w[3],G=w[4]||I,K=w[5]||N;l=new j(S,I,+N,G,+K);const Q=Array.from(l.elements)[0];!Q||(Q.closest(".js-diff-table").classList.contains("file-diff-split")?T():F())}i($,"showHighlight");function oe(w,S){const I={starting_diff_position:S.start.side+S.start.lineNumber,ending_diff_position:S.end.side+S.end.lineNumber,line_count:S.lineCount};w.setAttribute("data-hydro-client-context",JSON.stringify(I)),(0,b.Fk)(w)}i(oe,"sendHydroEvent"),(0,x.Z)($),(0,d.N7)(".blob-expanded",$),(0,d.N7)(".js-diff-progressive-loader",function(w){w.addEventListener("load",$)}),(0,d.N7)(".js-diff-entry-loader",function(w){w.addEventListener("load",$)})},94673:(z,B,m)=>{var g=m(59753);(0,g.on)("click",".js-rich-diff.collapsed .js-expandable",function(C){if(!(C.target instanceof Element))return;C.preventDefault(),C.target.closest(".js-rich-diff").classList.remove("collapsed")}),(0,g.on)("click",".js-show-rich-diff",function(C){const j=C.currentTarget.closest(".js-warn-no-visible-changes");if(!j)return;j.classList.add("d-none");const E=j.parentElement.querySelector(".js-no-rich-changes");E&&E.classList.remove("d-none")})},78694:(z,B,m)=>{m.d(B,{M:()=>j,T:()=>x});var g=m(14840),C=m(82036);function j(v,q=!1){return x(v)||u(v,q)||f(v)||h(v)}i(j,"hasInteractions");function x(v){for(const q of v.querySelectorAll("input, textarea"))if((q instanceof HTMLInputElement||q instanceof HTMLTextAreaElement)&&E(q))return!0;return!1}i(x,"hasDirtyFields");function E(v){if(v instanceof HTMLInputElement&&(v.type==="checkbox"||v.type==="radio")){if(v.checked!==v.defaultChecked)return!0}else if(v.value!==v.defaultValue)return!0;return!1}i(E,"formFieldValueChanged");let d;async function y(v,q){d=v;try{await q()}finally{d=null}}i(y,"withActiveElement");function b(v){return d instanceof Element?d:v&&v.ownerDocument&&v.ownerDocument.activeElement?v.ownerDocument.activeElement:null}i(b,"getActiveElement");let l;document.addEventListener("mouseup",function(v){l=v.target});function u(v,q){const k=b(v);return k===null||q&&k===v?!1:k===v&&(0,C.sw)(k)||v.contains(k)&&!a(k)?!0:l instanceof Element&&v.contains(l)&&!!l.closest("details[open] > summary")}i(u,"hasFocus");const L="a[href], button";function a(v){var q;if(v instanceof g.Z)return!0;const k=v instanceof HTMLAnchorElement||v instanceof HTMLButtonElement,R=(q=v.parentElement)==null?void 0:q.classList.contains("task-list-item");if(k&&R)return!0;if(!(l instanceof Element))return!1;const A=v.closest(L);if(!A)return!1;const _=l.closest(L);return A===_}i(a,"activeElementIsSafe");function f(v){return v.matches(":active:enabled")}i(f,"hasMousedown");function h(v){return!!(v.closest(".is-dirty")||v.querySelector(".is-dirty"))}i(h,"markedAsDirty")},95186:(z,B,m)=>{m.d(B,{Y:()=>y,q:()=>b});var g=m(88149),C=m(86058);const j="dimension_";let x;const E=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{const l=(0,g.n)("octolytics");delete l.baseContext,x=new C.R(l)}catch{}function d(l){const u=(0,g.n)("octolytics").baseContext||{};if(u){delete u.app_id,delete u.event_url,delete u.host;for(const f in u)f.startsWith(j)&&(u[f.replace(j,"")]=u[f],delete u[f])}const L=document.querySelector("meta[name=visitor-payload]");if(L){const f=JSON.parse(atob(L.content));Object.assign(u,f)}const a=new URLSearchParams(window.location.search);for(const[f,h]of a)E.includes(f.toLowerCase())&&(u[f]=h);return Object.assign(u,l)}i(d,"extendBaseContext");function y(l){x==null||x.sendPageView(d(l))}i(y,"sendPageView");function b(l,u){var L,a;const f=(a=(L=document.head)==null?void 0:L.querySelector('meta[name="current-catalog-service"]'))==null?void 0:a.content,h=f?{service:f}:{};for(const[v,q]of Object.entries(u))q!=null&&(h[v]=`${q}`);x==null||x.sendEvent(l||"unknown",d(h))}i(b,"sendEvent")},81654:(z,B,m)=>{m.d(B,{$S:()=>C,Fk:()=>j,sz:()=>x});var g=m(83476);function C(E,d,y){const b={hydroEventPayload:E,hydroEventHmac:d,visitorPayload:"",visitorHmac:"",hydroClientContext:y},l=document.querySelector("meta[name=visitor-payload]");l instanceof HTMLMetaElement&&(b.visitorPayload=l.content);const u=document.querySelector("meta[name=visitor-hmac]")||"";u instanceof HTMLMetaElement&&(b.visitorHmac=u.content),(0,g.b)(b,!0)}i(C,"sendData");function j(E){const d=E.getAttribute("data-hydro-view")||"",y=E.getAttribute("data-hydro-view-hmac")||"",b=E.getAttribute("data-hydro-client-context")||"";C(d,y,b)}i(j,"trackView");function x(E){const d=E.getAttribute("data-hydro-click-payload")||"",y=E.getAttribute("data-hydro-click-hmac")||"",b=E.getAttribute("data-hydro-client-context")||"";C(d,y,b)}i(x,"sendHydroEvent")},11178:(z,B,m)=>{m.d(B,{v:()=>g});function g(C,j){j.appendChild(C.extractContents()),C.insertNode(j)}i(g,"surroundContents")},37713:(z,B,m)=>{m.d(B,{kc:()=>x,lA:()=>E,zT:()=>j});var g=m(14037),C=m(54235);function j(d){if(d.hasAttribute("data-ignore-sticky-scroll"))return;const y=d.ownerDocument;setTimeout(()=>{y&&y.defaultView&&(d.scrollIntoView(),y.defaultView.scrollBy(0,-E(y)))},0)}i(j,"scrollIntoView");function x(d){const y=(0,g.Kt)(d);y&&j(y)}i(x,"scrollToFragmentTarget");function E(d){(0,C.H)();const y=d.querySelectorAll(".js-sticky-offset-scroll"),b=d.querySelectorAll(".js-position-sticky"),l=Math.max(0,...Array.from(y).map(a=>{const{top:f,height:h}=a.getBoundingClientRect();return f===0?h:0}))+Math.max(0,...Array.from(b).map(a=>{const{top:f,height:h}=a.getBoundingClientRect(),v=parseInt(getComputedStyle(a).top);if(!a.parentElement)return 0;const q=a.parentElement.getBoundingClientRect().top;return f===v&&q<0?h:0})),u=d.querySelectorAll(".js-position-sticky-stacked"),L=Array.from(u).reduce((a,f)=>{const{height:h,top:v}=f.getBoundingClientRect(),q=v<0,k=f.classList.contains("is-stuck");return a+(!q&&k?h:0)},0);return l+L}i(E,"computeFixedYOffset")},74136:(z,B,m)=>{m.d(B,{H5:()=>b,Of:()=>L,x0:()=>u,z8:()=>l});var g=m(78694),C=m(64463),j=m(10900),x=m(96776),E=m(40728);const d=new WeakMap,y={};function b(){for(const v of Object.keys(y))delete y[v];const h=history.state||{};h.staleRecords=y,(0,E.lO)(h,"",location.href),window.location.reload()}i(b,"reload");function l(){if(Object.keys(y).length>0){const h=history.state||{};h.staleRecords=y,(0,E.lO)(h,"",location.href)}}i(l,"registerStaleRecords");async function u(h){if(d.get(h))return;const v=h.hasAttribute("data-retain-focus"),q=h.getAttribute("data-url");if(!q)throw new Error("could not get url");const k=new AbortController;d.set(h,k);try{const R=await fetch(q,{signal:k.signal,headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"}});if(!R.ok)return;const A=await R.text();if((0,g.M)(h,v)){console.warn("Failed to update content with interactions",h);return}return y[q]=A,a(h,A,v)}catch{}finally{d.delete(h)}}i(u,"updateContent");async function L(h,v,q=!1){const k=d.get(h);k==null||k.abort();const R=h.closest(".js-updatable-content[data-url], .js-updatable-content [data-url]");return!q&&R&&R===h&&(y[R.getAttribute("data-url")||""]=v),a(h,v)}i(L,"replaceContent");function a(h,v,q=!1){return(0,x._8)(document,()=>{const k=(0,j.r)(document,v.trim()),R=q&&h.ownerDocument&&h===h.ownerDocument.activeElement?k.querySelector("*"):null,A=Array.from(h.querySelectorAll("details[open][id]")).map(_=>_.id);h.tagName==="DETAILS"&&h.id&&h.hasAttribute("open")&&A.push(h.id);for(const _ of h.querySelectorAll(".js-updatable-content-preserve-scroll-position")){const H=_.getAttribute("data-updatable-content-scroll-position-id")||"";f.set(H,_.scrollTop)}for(const _ of A){const H=k.querySelector(`#${_}`);H&&H.setAttribute("open","")}h.replaceWith(k),R instanceof HTMLElement&&R.focus()})}i(a,"replace");const f=new Map;(0,C.N7)(".js-updatable-content-preserve-scroll-position",{constructor:HTMLElement,add(h){const v=h.getAttribute("data-updatable-content-scroll-position-id");if(!v)return;const q=f.get(v);q!=null&&(h.scrollTop=q)}})},12585:(z,B,m)=>{m.d(B,{Z:()=>C});function g(j){return j.offsetWidth<=0&&j.offsetHeight<=0}i(g,"hidden");function C(j){return!g(j)}i(C,"visible")},96776:(z,B,m)=>{m.d(B,{_8:()=>g,uQ:()=>C});function g(E,d){return C(j(E),d)}i(g,"preserveAnchorNodePosition");function C(E,d){var y=E;if(!y)return Promise.resolve(d());var b=y.ownerDocument.documentElement;function l(a){for(var f=[];a;){var h=a.getBoundingClientRect(),v=h.top,q=h.left;f.push({element:a,top:v,left:q}),a=a.parentElement}return f}i(l,"computeAncestorBoundingRects");function u(a){for(var f=0;f<a.length;f++){var h=a[f];if(b.contains(h.element))return h}}i(u,"firstAttachedBoundingRect");var L=l(y);return Promise.resolve(d()).then(function(a){var f=u(L);if(f){y=f.element;var h=f.top,v=f.left,q=y.getBoundingClientRect(),k=q.top,R=q.left;x(y,R-v,k-h)}return a})}i(C,"preservePosition");function j(E){if(E.activeElement!==E.body)return E.activeElement;var d=E.querySelectorAll(":hover"),y=d.length;if(y)return d[y-1]}i(j,"findAnchorNode");function x(E,d,y){var b=E.ownerDocument,l=b.defaultView;function u(k){return k.offsetParent?{top:k.scrollTop,left:k.scrollLeft}:{top:l.pageYOffset,left:l.pageXOffset}}i(u,"scrollOffsets");function L(k,R,A){if(R===0&&A===0)return[0,0];var _=u(k),H=_.top+A,P=_.left+R;k===b||k===l||k===b.documentElement||k===b.body?b.defaultView.scrollTo(P,H):(k.scrollTop=H,k.scrollLeft=P);var ee=u(k);return[ee.left-_.left,ee.top-_.top]}i(L,"scrollBy");function a(k){var R=k;if(!(!R.offsetParent||R===b.body)){for(;R!==b.body;){if(R.parentElement)R=R.parentElement;else return;var A=l.getComputedStyle(R),_=A.position,H=A.overflowY,P=A.overflowX;if(_==="fixed"||H==="auto"||P==="auto"||H==="scroll"||P==="scroll")break}return R}}i(a,"overflowParent");for(var f=a(E),h=0,v=0;f;){var q=L(f,d-h,y-v);if(h+=q[0],v+=q[1],h===d&&v===y)break;f=a(f)}}i(x,"cumulativeScrollBy")},86058:(z,B,m)=>{m.d(B,{R:()=>y});function g(){let b;try{b=window.top.document.referrer}catch{if(window.parent)try{b=window.parent.document.referrer}catch{}}return b===""&&(b=document.referrer),b}i(g,"getReferrer");function C(){try{return`${screen.width}x${screen.height}`}catch{return"unknown"}}i(C,"getScreenResolution");function j(){let b=0,l=0;try{return typeof window.innerWidth=="number"?(l=window.innerWidth,b=window.innerHeight):document.documentElement!=null&&document.documentElement.clientWidth!=null?(l=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body!=null&&document.body.clientWidth!=null&&(l=document.body.clientWidth,b=document.body.clientHeight),`${l}x${b}`}catch{return"unknown"}}i(j,"getBrowserResolution");function x(){return navigator.languages?navigator.languages.join(","):navigator.language||""}i(x,"getBrowserLanguages");function E(){return{referrer:g(),user_agent:navigator.userAgent,screen_resolution:C(),browser_resolution:j(),browser_languages:x(),pixel_ratio:window.devicePixelRatio,timestamp:Date.now(),tz_seconds:new Date().getTimezoneOffset()*-60}}i(E,"getRequestContext");var d=m(82918);class y{constructor(l){this.options=l}get collectorUrl(){return this.options.collectorUrl}get clientId(){return this.options.clientId?this.options.clientId:(0,d.b)()}createEvent(l){return{page:location.href,title:document.title,context:{...this.options.baseContext,...l}}}sendPageView(l){const u=this.createEvent(l);this.send({page_views:[u]})}sendEvent(l,u){const L={...this.createEvent(u),type:l};this.send({events:[L]})}send({page_views:l,events:u}){const L={client_id:this.clientId,page_views:l,events:u,request_context:E()},a=JSON.stringify(L);try{if(navigator.sendBeacon){navigator.sendBeacon(this.collectorUrl,a);return}}catch{}fetch(this.collectorUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:a,keepalive:!1})}}i(y,"AnalyticsClient")},82918:(z,B,m)=>{m.d(B,{b:()=>E});let g;function C(){return`${Math.round(Math.random()*(Math.pow(2,31)-1))}.${Math.round(Date.now()/1e3)}`}i(C,"generateClientId");function j(d){const y=`GH1.1.${d}`,b=Date.now(),l=new Date(b+1*365*86400*1e3).toUTCString();let{domain:u}=document;u.endsWith(".github.com")&&(u="github.com"),document.cookie=`_octo=${y}; expires=${l}; path=/; domain=${u}; secure; samesite=lax`}i(j,"setClientIdCookie");function x(){let d;const b=document.cookie.match(/_octo=([^;]+)/g);if(!b)return;let l=[0,0];for(const u of b){const[,L]=u.split("="),[,a,...f]=L.split("."),h=a.split("-").map(Number);h>l&&(l=h,d=f.join("."))}return d}i(x,"getClientIdFromCookie");function E(){try{const d=x();if(d)return d;const y=C();return j(y),y}catch{return g||(g=C()),g}}i(E,"getOrCreateClientId")},88149:(z,B,m)=>{m.d(B,{n:()=>g});function g(C="ha"){let j;const x={},E=document.head.querySelectorAll(`meta[name^="${C}-"]`);for(const d of Array.from(E)){const{name:y,content:b}=d,l=y.replace(`${C}-`,"").replace(/-/g,"_");l==="url"?j=b:x[l]=b}if(!j)throw new Error(`AnalyticsClient ${C}-url meta tag not found`);return{collectorUrl:j,...Object.keys(x).length>0?{baseContext:x}:{}}}i(g,"getOptionsFromMeta")},27034:(z,B,m)=>{m.d(B,{Z:()=>b});const g=new WeakMap,C=new IntersectionObserver(l=>{for(const u of l)if(u.isIntersecting){const{target:L}=u;if(C.unobserve(L),!(L instanceof b))return;L.loading==="lazy"&&x(L)}},{rootMargin:"0px 0px 256px 0px",threshold:.01});function j(){return new Promise(l=>setTimeout(l,0))}i(j,"task");async function x(l){return C.unobserve(l),E(l).then(function(u){const L=document.createElement("template");L.innerHTML=u;const a=document.importNode(L.content,!0);!l.dispatchEvent(new CustomEvent("include-fragment-replace",{cancelable:!0,detail:{fragment:a}}))||(l.replaceWith(a),l.dispatchEvent(new CustomEvent("include-fragment-replaced")))},function(){l.classList.add("is-error")})}i(x,"handleData");function E(l){const u=l.src;let L=g.get(l);return L&&L.src===u?L.data:(u?L=d(l):L=Promise.reject(new Error("missing src")),g.set(l,{src:u,data:L}),L)}i(E,"getData");function d(l){return j().then(()=>(l.dispatchEvent(new Event("loadstart")),l.fetch(l.request()))).then(u=>{if(u.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${u.status}`);const L=u.headers.get("Content-Type");if(!y(l.accept)&&(!L||!L.includes(l.accept?l.accept:"text/html")))throw new Error(`Failed to load resource: expected ${l.accept||"text/html"} but was ${L}`);return u.text()}).then(u=>(j().then(()=>{l.dispatchEvent(new Event("load")),l.dispatchEvent(new Event("loadend"))}),u),u=>{throw j().then(()=>{l.dispatchEvent(new Event("error")),l.dispatchEvent(new Event("loadend"))}),u})}i(d,"fetchDataWithEvents");function y(l){return l&&!!l.split(",").find(u=>u.match(/^\s*\*\/\*/))}i(y,"isWildcard");class b extends HTMLElement{static get observedAttributes(){return["src","loading"]}get src(){const u=this.getAttribute("src");if(u){const L=this.ownerDocument.createElement("a");return L.href=u,L.href}else return""}set src(u){this.setAttribute("src",u)}get loading(){return this.getAttribute("loading")==="lazy"?"lazy":"eager"}set loading(u){this.setAttribute("loading",u)}get accept(){return this.getAttribute("accept")||""}set accept(u){this.setAttribute("accept",u)}get data(){return E(this)}attributeChangedCallback(u,L){u==="src"?this.isConnected&&this.loading==="eager"&&x(this):u==="loading"&&this.isConnected&&L!=="eager"&&this.loading==="eager"&&x(this)}constructor(){super();this.attachShadow({mode:"open"}).innerHTML=`
      <style> 
        :host {
          display: block;
        }
      </style>
      <slot></slot>`}connectedCallback(){this.src&&this.loading==="eager"&&x(this),this.loading==="lazy"&&C.observe(this)}request(){const u=this.src;if(!u)throw new Error("missing src");return new Request(u,{method:"GET",credentials:"same-origin",headers:{Accept:this.accept||"text/html"}})}load(){return E(this)}fetch(u){return fetch(u)}}i(b,"IncludeFragmentElement"),window.customElements.get("include-fragment")||(window.IncludeFragmentElement=b,window.customElements.define("include-fragment",b))}},z=>{var B=i(g=>z(z.s=g),"__webpack_exec__");z.O(0,[5724,93,90,2734,3682,6791],()=>B(46100));var m=z.O()}]);})();

//# sourceMappingURL=diffs-adb46c50cf68.js.map